; Run locally unified storage with SQLite to test
; new API registration changes
app_mode = development
target = all

[log]
level = debug

[server]
; HTTPS is required for kubectl (but HTTP works for testing with curl)
protocol = https
http_port = 1111

[feature_toggles]
; Enable the apiextensions feature
apiExtensions = true
; Enable unified storage globally
unifiedStorage = true
; Enable search indexing for unified storage
unifiedStorageSearch = true
; Enable the grafana-apiserver explicitly
grafanaAPIServer = true

[grafana-apiserver]
; Use unified storage backed by SQL (uses your Grafana database)
storage_type = unified

; Configure dashboards to use unified storage
[unified_storage.dashboards.dashboard.grafana.app]
; Dualwriter modes:
; 0: disabled (default) - dashboards saved to SQL only
; 1: read from legacy, write to legacy, write to unified best-effort
; 2: read from legacy, write to both
; 3: read from unified, write to both
; 4: read from unified, write to unified (fully migrated)
; 5: read from unified, write to unified, ignore background sync state
dualWriterMode = 5

; Configure folders to use unified storage (required for dashboards)
[unified_storage.folders.folder.grafana.app]
dualWriterMode = 5

[database]
; SQLite database for testing
type = sqlite3
path = grafana.db
; Enable high availability mode is false for single instance
high_availability = false