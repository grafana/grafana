<topnav section="关键指标" icon="fa fa-fw fa-home"></topnav>
<div class="page-container" style="padding-left: 10px;">
    <div class="summary-list" style="box-sizing:border-box;">

        <div class="main-view-container preview-panel" style="background:none;">
            <div class="grafana-row" ng-controller="RowCtrl" ng-repeat="(row_name, row) in dashboard.rows" row-height ng-class="{'summary-item':!panleJson[row_name].fullwidth}" style="background:#fff;">
                <div class="row-control">
                    <div class="row-control-inner">
                        <div class="row-close" ng-show="row.collapse" data-placement="bottom">
                            <div class="row-close-buttons">
                                <span class="row-button bgPrimary" ng-click="toggleRow(row)">
                <i bs-tooltip="'Expand row'" data-placement="right" class="fa fa-caret-left pointer"></i>
                </span>
                            </div>
                            <div class="row-text pointer" ng-click="toggleRow(row)" ng-bind="row.title | interpolateTemplateVars:this"></div>
                        </div>
                    </div>

                    <div class="panels-wrapper" ng-if="!row.collapse">
                        <div class="row-text pointer" ng-click="toggleRow(row)" ng-if="row.showTitle" ng-bind="row.title | interpolateTemplateVars:this">
                        </div>

                        
                        <h3 style="padding-left:10px;">{{panleJson[row_name].header}}</h3>
                        <div ng-repeat="(name, panel) in row.panels track by panel.id" class="panel" ui-draggable="!dashboardViewState.fullscreen"
                            drag="panel.id" ui-on-Drop="onDrop($data, row, panel)" drag-handle-class="drag-handle" panel-width>
                            <div style="padding-left: 10px;" ng-if="panleJson[row_name].header == '健康指数趋势'">
                                <div style="height: 60px">
                                    <em style="font-size: 60px;line-height:66px;font-style: normal">{{applicationHealth}}</em>
                                    <span>{{leveal}}</span>
                                </div>
                                <br>
                                <p>自动检测到所有<strong>{{ summary.numMetrics }}</strong>个指标中: 告警指标 <strong>{{ summary.numAlertsTriggered }}</strong>个  异常指标 <strong>{{ summary.numAnomalyMetrics }}</strong>个 <tip>健康值=(告警指标个数/定义规则总数)*50% + (异常指标/所有指标) * 50%</tip></p>
                            </div>
                            <ul class="btn-list-status" ng-if="panleJson[row_name].status">
                                <li class="btn-item" style="width:70px;">当前状态:</li>
                                <li ng-if="panleJson[row_name].status.danger[1]!=0"><a href="{{panleJson[row_name].href}}" class="btn-item system-status system-status-danger">{{panleJson[row_name].status.danger[0]}} <span>{{panleJson[row_name].status.danger[1]}}</span></a></li>
                                <li ng-if="panleJson[row_name].status.warn[1]!=0"><a href="{{panleJson[row_name].href}}" class="btn-item system-status system-status-warning">{{panleJson[row_name].status.warn[0]}} <span>{{panleJson[row_name].status.warn[1]}}</span></a></li>
                                <li ng-if="panleJson[row_name].status.success[1]!=0"><a href="{{panleJson[row_name].href}}" class="btn-item system-status system-status-success">{{panleJson[row_name].status.success[0]}} <span>{{panleJson[row_name].status.success[1]}}</span></a></li>
                            </ul>
                            <div class="clearfix"></div>
                            <panel-loader type="panel.type" class="panel-margin summary-panel"></panel-loader>
                            <p ng-if="panleJson[row_name].panels[name].tip"><i class="fa fa-info-circle" style="padding:0 10px;"></i>
                                预计未来 
                                <select style="width:66px;"
                                        ng-model="panleJson[row_name].panels[name].selectedOption"
                                        ng-change="changePre(panleJson[row_name].panels[name].selectedOption)"
                                        ng-options="tip.time for tip in panleJson[row_name].panels[name].tips">
                                </select>
                                {{panleJson[row_name].panels[name].tip + panleJson[row_name].panels[name].selectedOption.data}}
                            </p>
                        </div>
                    </div>
                        <div class="clearfix"></div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>