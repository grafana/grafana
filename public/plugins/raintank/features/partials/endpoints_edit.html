<topnav toggle="toggleSideMenu()" icon="icon-rt-endpoint" section="Endpoints" show-menu-btn="!grafana.sidemenu">
	<ul class="nav">
		<li class="top-nav-title ng-binding">
			<div>
				<form style="margin-bottom:0px;">
					<li class="dropdown">
						<a class="pointer" data-toggle="dropdown" ng-click="loadOrgs()">
							<span>{{endpoint.name}}</span><i class="fa fa-caret-down small" style="position:relative; top:5px; left:10px;"></i>
				   		</a>
						<ul class="dropdown-menu" role="menu" style="left: 65px">
							<li ng-repeat="endpoint in endpoints">
								<a class="small" href="endpoints/summary/{{endpoint.id}}">{{endpoint.name}}</a>
							</li>
						</ul>
					</li>
				</form>
			</div>
		</li>
	</ul>
</topnav>

<div style="margin: 10px; position: relative; display: block; min-width:400px; max-width: 1000px;">
	<!-- page title -->
	<div class="rt-page-header-area">
		<h1 class="rt-h1">{{endpoint.name}}</h1>
	</div>
	<div class="editor-row rt-detail-pages">
		<div class="editor-option">
			<bootstrap-tagsinput ng-model="endpoint.tags" tagclass="label rt-label-tag" placeholder="New Tag" on-update="tagsUpdated" ></bootstrap-tagsinput>
		</div>
	</div>

	<!-- tabs -->
	<div class="rt-tabs" ng-if="endpoint.id">
		<span class="nonactive"><a href="endpoints/summary/{{endpoint.id}}">Summary</a></span>  <span class="active" ng-hide="!contextSrv.isGrafanaAdmin"><a href="endpoints/edit/{{endpoint.id}}">Configuration</a></span>
	</div>
</div>


	<form name="endpointForm" style="margin: 0px; position: relative; display: block; min-width:400px; max-width: 1020px;">

	<div class="grid">
		<div class="grid-full rt-box">
			<div class="rt-box-header">
				<div style="padding:10px;">General Settings</div>
			</div>
			<div class="rt-box-body" style="min-height: 50px">
				<div class="editor-row">
					<div class="editor-option">
						<label class="small">Site Name</label>
						<input type="text" class="input-medium" ng-model="endpoint.name" required></input>
					</div>
				</div>
				<div class="editor-row">
					<div class="editor-option">
						<label class="small">Tags</label>
						<bootstrap-tagsinput ng-model="endpoint.tags" tagclass="label label-tag" placeholder="add tags">
						</bootstrap-tagsinput>
						<tip>Press enter to a add tag</tip>
					</div>
				</div>
				<div class="editor-row" ng-show="endpoint.id">
					<button type="submit" class="btn btn-success" ng-click="updateEndpoint(endpoint)">Update Settings</button>
				</div>
			</div>
		</div>
	</div>
	<div ng-if="endpoint.id">
		<div class="grid">
			<div class="grid-full rt-box" ng-repeat="(monitor_type, monitor) in monitors">
				<div class="rt-box-header">
					<div style="padding:10px;">
						<span>{{monitor_types_by_name[monitor_type].name}}</span>
						<a ng-click="removeMonitor(monitor)" style="float: right"  class="btn btn-danger btn-mini" ng-show="monitor.id">
							<i class="fa fa-remove"></i>
						</a>
					</div>
				</div>
				<div class="rt-box-body">
					<div class="editor-row">
						<div class="editor-option">
							<label class="small">Enabled</label>
							<input type="checkbox" class="input-xxlarge" ng-model="monitor.enabled" ng-true-value="true" ng-false-value="false"></input>
						</div>
						<div class="editor-option">
							<label class="small">Frequency</label>
							Every <select class="input-small" ng-model="monitor.frequency" ng-options="f for f in [10, 30, 60, 120]"></select> seconds
						</div>
						<div class="editor-option">
							<label class="small">&nbsp;</label>
							<endpoint-collector-select model="monitor" collectors="collectors"></endpoint-collector-select>
						</div>
					</div>
					<div class="editor-row">
						<div class="editor-option" ng-repeat="setting in monitor_types_by_name[monitor_type].settings | filter:{required: 'true'}">
							<raintank-setting definition="setting" target="currentSettingByVariable(monitor, setting.variable)">
						</div>
					</div>
					<div class="editor-row">
						<div class="editor-option" ng-repeat="setting in monitor_types_by_name[monitor_type].settings | filter:{required: 'false'}">
							<raintank-setting definition="setting" target="currentSettingByVariable(monitor, setting.variable)">
						</div>
					</div>
					<div class="editor-row" ng-show="monitor.id">
						<button type="submit" class="btn btn-success" ng-click="updateMonitor(monitor)">Update {{monitor_type}} Check</button>
					</div>
				</div>
			</div>
		</div>
	</div>	
		<div class="dashboard-editor-footer" style="margin-top: 20px">
			<button type="submit" class="btn btn-info" ng-hide="endpoint.id" ng-click="cancel()">Cancel</button>
			<button type="submit" class="btn btn-success" ng-hide="endpoint.id" ng-click="add()">Add</button>
			<button type="submit" class="btn btn-success" ng-show="endpoint.id" ng-click="save()">Save</button>
		</div>
	</form>
</div>

			