name: REAL Secret Leak Test
on: [workflow_dispatch]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Test GitHub Secret Masking
        env:
          # Try to simulate how real secrets behave
          TEST_ENV_VAR: ${{ 'fake-secret-value-123' }}
        run: |
          echo "Testing if GitHub masks this:"
          echo "Value: $TEST_ENV_VAR"
          echo ""
          echo "If you see 'fake-secret-value-123' → Debug might leak"
          echo "If you see '***' → GitHub masks it"
          
      - name: Check ACTIONS_STEP_DEBUG impact
        if: env.ACTIONS_STEP_DEBUG == 'true'
        run: |
          echo "Debug mode is ON"
          env | grep -i test
