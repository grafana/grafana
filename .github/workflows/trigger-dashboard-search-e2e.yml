name: trigger-dashboard-search-e2e
# triggers the dashboard search e2e tests which runs async 
# doesn't block prs, allows setting up notifications from grafana
on:
  push:
    branches:
      - main
    paths:
      - public/app/features/search/**/*.ts
      - public/app/features/search/**/*.tsx
      - pkg/storage/**/*.go
  pull_request:
    branches:
      - main
    paths:
      - public/app/features/search/**/*.ts
      - public/app/features/search/**/*.tsx
      - pkg/storage/**/*.go
env:
  ARCH: linux-amd64

jobs:
  trigger-search-e2e:
    runs-on: ubuntu-latest
    # Run on `grafana/grafana` main branch, or on pull requests to prevent double-running on mirrors
    if: (github.event_name == 'pull_request' && github.event.pull_request.draft == false) || (github.event_name == 'push' && github.repository == 'grafana/grafana')
    steps:
      - name: Trigger Dashboard Search E2E
        run: echo "Triggered Dashboard Search e2e..."
