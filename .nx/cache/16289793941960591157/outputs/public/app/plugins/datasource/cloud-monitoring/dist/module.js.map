{"version":3,"file":"module.js","mappings":"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","sources":["webpack://stackdriver/../../../../../node_modules/@grafana/google-sdk/dist/index.production.js","webpack://stackdriver/../../../../../node_modules/@grafana/google-sdk/index.js","webpack://stackdriver/../../../../../node_modules/debounce-promise/dist/index.js","webpack://stackdriver/../../../../../node_modules/fast-deep-equal/index.js","webpack://stackdriver/external amd \"@emotion/css\"","webpack://stackdriver/external amd \"@grafana/data\"","webpack://stackdriver/external amd \"@grafana/runtime\"","webpack://stackdriver/external amd \"@grafana/ui\"","webpack://stackdriver/external amd \"lodash\"","webpack://stackdriver/external amd \"react\"","webpack://stackdriver/external amd \"rxjs\"","webpack://stackdriver/webpack/bootstrap","webpack://stackdriver/webpack/runtime/compat get default export","webpack://stackdriver/webpack/runtime/define property getters","webpack://stackdriver/webpack/runtime/hasOwnProperty shorthand","webpack://stackdriver/webpack/runtime/make namespace object","webpack://stackdriver/./components/CloudMonitoringCheatSheet.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/DataSourceDescription.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/GenericConfigSection.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/ConfigEditor/ConfigSection/ConfigSection.js","webpack://stackdriver/./components/ConfigEditor/ConfigEditor.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/Stack.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRows.js","webpack://stackdriver/./e2e/selectors.ts","webpack://stackdriver/./dataquery.gen.ts","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/Space.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorField.js","webpack://stackdriver/./components/AliasBy.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorRow.js","webpack://stackdriver/./constants.ts","webpack://stackdriver/./components/Project.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorFieldGroup.js","webpack://stackdriver/./functions.ts","webpack://stackdriver/./components/Aggregation.tsx","webpack://stackdriver/./components/GroupBy.tsx","webpack://stackdriver/./components/AlignmentFunction.tsx","webpack://stackdriver/./components/PeriodSelect.tsx","webpack://stackdriver/./components/Alignment.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/AccessoryButton.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorList.js","webpack://stackdriver/./components/LabelFilter.tsx","webpack://stackdriver/./components/AnnotationsHelp.tsx","webpack://stackdriver/./components/LookbackPeriodSelect.tsx","webpack://stackdriver/./components/SLO.tsx","webpack://stackdriver/./components/Selector.tsx","webpack://stackdriver/./components/Service.tsx","webpack://stackdriver/./components/SLOQueryEditor.tsx","webpack://stackdriver/./components/MQLQueryEditor.tsx","webpack://stackdriver/./components/Fields.tsx","webpack://stackdriver/./components/Preprocessor.tsx","webpack://stackdriver/./components/VisualMetricQueryEditor.tsx","webpack://stackdriver/./components/GraphPeriod.tsx","webpack://stackdriver/./components/MetricQueryEditor.tsx","webpack://stackdriver/./components/PromQLEditor.tsx","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/EditorHeader.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/InlineSelect.js","webpack://stackdriver/../../../../../node_modules/@grafana/experimental/dist/esm/QueryEditor/FlexItem.js","webpack://stackdriver/./components/QueryHeader.tsx","webpack://stackdriver/./components/VariableQueryEditor.tsx","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack://stackdriver/../../../../../node_modules/tslib/tslib.es6.mjs","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/config.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack://stackdriver/../../../../../node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack://stackdriver/../../../../../node_modules/react-use/esm/useDebounce.js","webpack://stackdriver/../../../../../node_modules/react-use/esm/useTimeoutFn.js","webpack://stackdriver/./components/AnnotationQueryEditor.tsx","webpack://stackdriver/./annotationSupport.ts","webpack://stackdriver/./CloudMonitoringMetricFindQuery.ts","webpack://stackdriver/./variables.ts","webpack://stackdriver/./datasource.ts","webpack://stackdriver/./module.ts","webpack://stackdriver/./components/QueryEditor.tsx","webpack://stackdriver/./tracking.ts"],"sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"@grafana/data\"),t=require(\"@grafana/ui\"),a=require(\"react\"),n=require(\"lodash\");function l(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var o=l(a);const i={JWT:\"jwt\",GCE:\"gce\"},r=\"Configuration help box\",s=\"Configuration drop zone\",u=\"Configuration text area\",c=\"Paste JWT button\",d=\"Upload JWT button\",p=\"JWT form\",f=\"JWT button\",m=\"GCE button\",g=\"Private Key Path Input\",h=\"Private Key Input\",y=\"Fill JWT info manually\",E=\"Show private key path input\",T=\"Show private key input\",v=[\"private_key\",\"token_uri\",\"client_email\",\"project_id\"],b=({onChange:e,showConfigEditor:n,showPaste:l,showUpload:i,isPasting:r,isUploading:p})=>{const[f,m]=a.useState(),g=t.useTheme2(),h=a.useCallback((e=>{m(null),l()}),[l]),E=a.useCallback((e=>{i(),m(null)}),[i]),T=a.useCallback((t=>{if(\"\"!==t.trim()){let a;try{a=JSON.parse(t)}catch(e){m(\"Invalid JWT token\")}const l=j(a);l.isValid?(n(),e({privateKey:a.private_key,tokenUri:a.token_uri,clientEmail:a.client_email,projectId:a.project_id})):m(l.error)}}),[m,e,n]);return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.Field,{label:\"JWT token\",invalid:Boolean(f),description:r?\"Paste JWT token below\":\"Upload or paste Google JWT token\",error:f},o.default.createElement(o.default.Fragment,null,p&&o.default.createElement(\"div\",{\"data-testid\":s},t.FileDropzone&&o.default.createElement(t.FileDropzone,{options:{multiple:!1,accept:\".json\"},readAs:\"readAsText\",onLoad:e=>{T(e)}},o.default.createElement(\"p\",{style:{margin:0,fontSize:`${g.typography.h4.fontSize}`,textAlign:\"center\"}},\"Drop the Google JWT file here\",o.default.createElement(\"br\",null),o.default.createElement(\"br\",null),o.default.createElement(t.Button,{fill:\"outline\"},\"Click to browse files\")))),r&&o.default.createElement(t.TextArea,{\"data-testid\":u,autoFocus:!0,invalid:Boolean(f),placeholder:\"Paste Google JWT token here\",onBlur:e=>T(e.currentTarget.value),rows:12}))),!r&&o.default.createElement(o.default.Fragment,null,o.default.createElement(t.Button,{\"data-testid\":c,type:\"button\",fill:\"outline\",style:{color:`${g.colors.primary.text}`},onClick:h},\"Paste JWT Token\"),o.default.createElement(\"span\",{style:{paddingRight:\"10px\",paddingLeft:\"10px\"}},\"or\")),r&&o.default.createElement(o.default.Fragment,null,o.default.createElement(t.Button,{\"data-testid\":d,type:\"button\",fill:\"outline\",style:{color:`${g.colors.primary.text}`},onClick:()=>{i()}},\"Upload JWT Token\"),o.default.createElement(\"span\",{style:{paddingRight:\"10px\",paddingLeft:\"10px\"}},\"or\")),o.default.createElement(t.Button,{\"data-testid\":y,type:\"button\",fill:\"outline\",style:{color:`${g.colors.primary.text}`},onClick:n},\"Fill In JWT Token manually\"),r&&f&&o.default.createElement(t.Field,null,o.default.createElement(t.Button,{type:\"button\",fill:\"outline\",style:{color:`${g.colors.primary.text}`},onClick:E},\"Upload JWT Token\")))},j=e=>{if(!n.isObject(e))return{isValid:!1,error:\"Invalid JWT token\"};const t=v.filter((t=>!e[t]));return t.length>0?{isValid:!1,error:`Missing keys: ${t.join(\", \")}`}:{isValid:!0}},{SecretFormField:k}=t.LegacyForms;var J;!function(e){e.PATH=\"path\",e.JWT=\"jwt\"}(J||(J={}));const P=({options:a,onReset:n,onOptionsChange:l,showPaste:i,showUpload:r})=>{var s;const[u,f]=o.default.useState((e=>\"privateKeyPath\"in e&&\"\"!==e.privateKeyPath?J.PATH:J.JWT)(a.jsonData)),m=t=>e.onUpdateDatasourceJsonDataOption({options:a,onOptionsChange:l},t),y=()=>{u===J.JWT?f(J.PATH):f(J.JWT)},v=t.useTheme2(),b=o.default.createElement(\"span\",null,u===J.PATH?o.default.createElement(\"a\",{className:\"external-link\",onClick:y,\"data-testid\":T},\"Paste private key\"):\"Paste private key\",\" \",\"or \",u===J.JWT?o.default.createElement(\"a\",{className:\"external-link\",onClick:y,\"data-testid\":E},\"provide path to private file\"):\"provide path to private key file\"),j={isConfigured:Boolean(a.secureJsonFields.privateKey),value:(null===(s=a.secureJsonData)||void 0===s?void 0:s.privateKey)||\"\",placeholder:\"Enter Private key\",onReset:()=>n(),onChange:e.onUpdateDatasourceSecureJsonDataOption({options:a,onOptionsChange:l},\"privateKey\"),\"data-testid\":h};return o.default.createElement(\"div\",{\"data-testid\":p},o.default.createElement(t.Field,{label:\"Project ID\"},o.default.createElement(t.Input,{id:\"defaultProject\",width:60,value:a.jsonData.defaultProject||\"\",onChange:m(\"defaultProject\")})),o.default.createElement(t.Field,{label:\"Client email\"},o.default.createElement(t.Input,{width:60,id:\"clientEmail\",value:a.jsonData.clientEmail||\"\",onChange:m(\"clientEmail\")})),o.default.createElement(t.Field,{label:\"Token URI\"},o.default.createElement(t.Input,{width:60,id:\"tokenUri\",value:a.jsonData.tokenUri||\"\",onChange:m(\"tokenUri\")})),u===J.PATH&&o.default.createElement(t.Field,{label:\"Private key path\",description:b},o.default.createElement(t.Input,{width:60,id:\"privateKeyPath\",value:a.jsonData.privateKeyPath||\"\",placeholder:\"File location of your private key (e.g. /etc/secrets/gce.pem)\",onChange:m(\"privateKeyPath\"),\"data-testid\":g})),u===J.JWT&&o.default.createElement(o.default.Fragment,null,t.SecretInput?o.default.createElement(t.Field,{label:\"Private key\",description:b},o.default.createElement(t.SecretInput,Object.assign({},j,{width:60}))):o.default.createElement(k,Object.assign({},j,{label:\"Private key\",labelWidth:10,inputWidth:20}))),o.default.createElement(o.default.Fragment,null,o.default.createElement(t.Button,{\"data-testid\":c,type:\"button\",fill:\"outline\",style:{color:`${v.colors.primary.text}`},onClick:i},\"Paste JWT Token\"),o.default.createElement(\"span\",{style:{paddingRight:\"10px\",paddingLeft:\"10px\"}},\"or\"),o.default.createElement(t.Button,{\"data-testid\":d,type:\"button\",fill:\"outline\",style:{color:`${v.colors.primary.text}`},onClick:r},\"Upload JWT Token\")))};function C(n){const{options:l,onOptionsChange:r,authOptions:s}=n,{jsonData:u,secureJsonFields:c,secureJsonData:d}=l,p=()=>Boolean(u.clientEmail&&u.defaultProject&&u.tokenUri&&(c&&c.privateKey||u.privateKeyPath));u.authenticationType||(u.authenticationType=i.JWT);const[f,m]=a.useState(O(u.authenticationType)),[g,h]=a.useState(p()),[y,E]=a.useState(!1),[T,v]=a.useState(!0),j=()=>{E(!1),v(!0),h(!1)},k=()=>{E(!0),v(!1),h(!1)};return o.default.createElement(o.default.Fragment,null,o.default.createElement(t.FieldSet,{label:\"Authentication\"},o.default.createElement(t.Field,{label:\"Authentication type\"},o.default.createElement(t.RadioButtonGroup,{options:s,value:u.authenticationType||i.JWT,onChange:e=>{h(p()),r(Object.assign(Object.assign({},l),{jsonData:Object.assign(Object.assign({},l.jsonData),{authenticationType:e})})),m(O(e))}}))),f&&o.default.createElement(t.FieldSet,{label:\"JWT Key Details\"},g?o.default.createElement(P,{options:l,onReset:()=>(e=>{const t=Object.assign({},d),a=e?Object.assign(Object.assign({},l.jsonData),e):Object.assign({},l.jsonData);delete a.clientEmail,delete a.defaultProject,delete a.tokenUri,delete a.privateKeyPath,delete t.privateKey,m(!0),h(!1),r(Object.assign(Object.assign({},l),{secureJsonFields:Object.assign(Object.assign({},l.secureJsonFields),{privateKey:!1}),secureJsonData:t,jsonData:a}))})(),onOptionsChange:r,showUpload:j,showPaste:k}):o.default.createElement(b,{showConfigEditor:()=>{h(!0)},showUpload:j,showPaste:k,isPasting:y,isUploading:T,onChange:e=>{r(Object.assign(Object.assign({},l),{secureJsonFields:Object.assign(Object.assign({},c),{privateKey:!0}),secureJsonData:Object.assign(Object.assign({},d),{privateKey:e.privateKey}),jsonData:Object.assign(Object.assign({},u),{clientEmail:e.clientEmail,defaultProject:e.projectId,tokenUri:e.tokenUri})}))}}),\" \"),u.authenticationType===i.GCE&&o.default.createElement(t.Field,{label:\"Default project\"},o.default.createElement(t.Input,{id:\"defaultProject\",width:60,value:l.jsonData.defaultProject||\"\",onChange:e.onUpdateDatasourceJsonDataOption(n,\"defaultProject\")})))}const O=e=>e===i.JWT||void 0===e,W=[{label:\"Google JWT File\",value:i.JWT,ariaLabel:f},{label:\"GCE Default Service Account\",value:i.GCE,ariaLabel:m}];exports.AuthConfig=C,exports.ConnectionConfig=e=>{const{options:{jsonData:a}}=e;a.authenticationType||(a.authenticationType=i.JWT);const n=a.authenticationType===i.JWT||void 0===a.authenticationType;return o.default.createElement(o.default.Fragment,null,o.default.createElement(C,Object.assign({authOptions:W},e)),o.default.createElement(\"div\",{className:\"grafana-info-box\",style:{marginTop:\"16px\"},\"data-testid\":r},o.default.createElement(\"p\",null,\"Dont know how to get a service account key file or create a service account? Read more\",\" \",o.default.createElement(\"a\",{className:\"external-link\",target:\"_blank\",rel:\"noopener noreferrer\",href:\"https://grafana.com/docs/grafana/latest/datasources/google-cloud-monitoring/google-authentication/\"},\"in the documentation.\"))),!n&&o.default.createElement(t.Alert,{title:\"\",severity:\"info\"},\"Verify GCE default service account by clicking Save & Test\"))},exports.GOOGLE_AUTH_TYPE_OPTIONS=W,exports.GoogleAuthType=i,exports.JWTConfigEditor=b,exports.JWTForm=P;\n//# sourceMappingURL=index.production.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/index.production.js');\n} else {\n  module.exports = require('./dist/index.development.js');\n}\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__89__;","module.exports = __WEBPACK_EXTERNAL_MODULE__781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__269__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { css } from '@emotion/css';\nimport React, { PureComponent } from 'react';\n\nimport { QueryEditorHelpProps } from '@grafana/data';\n\nimport { CloudMonitoringQuery } from '../types/query';\n\nexport default class CloudMonitoringCheatSheet extends PureComponent<\n  QueryEditorHelpProps<CloudMonitoringQuery>,\n  { userExamples: string[] }\n> {\n  render() {\n    return (\n      <div>\n        <h2>Cloud Monitoring alias patterns</h2>\n        <div>\n          <p>\n            Format the legend keys any way you want by using alias patterns. Format the legend keys any way you want by\n            using alias patterns.\n          </p>\n          Example:\n          <code>{`${'{{metric.name}} - {{metric.label.instance_name}}'}`}</code>\n          <br />\n          Result: &nbsp;&nbsp;<code>cpu/usage_time - server1-europe-west-1</code>\n          <br />\n          <br />\n          <span>Patterns:</span>\n          <br />\n          <ul\n            className={css`\n              list-style: none;\n            `}\n          >\n            <li>\n              <code>{`${'{{metric.type}}'}`}</code> = metric type e.g. compute.googleapis.com/instance/cpu/usage_time\n            </li>\n            <li>\n              <code>{`${'{{metric.name}}'}`}</code> = name part of metric e.g. instance/cpu/usage_time\n            </li>\n            <li>\n              <code>{`${'{{metric.service}}'}`}</code> = service part of metric e.g. compute\n            </li>\n            <li>\n              <code>{`${'{{metric.label.label_name}}'}`}</code> = Metric label metadata e.g. metric.label.instance_name\n            </li>\n            <li>\n              <code>{`${'{{resource.label.label_name}}'}`}</code> = Resource label metadata e.g. resource.label.zone\n            </li>\n            <li>\n              <code>{`${'{{metadata.system_labels.name}}'}`}</code> = Meta data system labels e.g.\n              metadata.system_labels.name. For this to work, the needs to be included in the group by\n            </li>\n            <li>\n              <code>{`${'{{metadata.user_labels.name}}'}`}</code> = Meta data user labels e.g.\n              metadata.user_labels.name. For this to work, the needs to be included in the group by\n            </li>\n            <li>\n              <code>{`${'{{bucket}}'}`}</code> = bucket boundary for distribution metrics when using a heatmap in\n              Grafana\n            </li>\n            <li>\n              <code>{`${'{{project}}'}`}</code> = The project name that was specified in the query editor\n            </li>\n            <li>\n              <code>{`${'{{service}}'}`}</code> = The service id that was specified in the SLO query editor\n            </li>\n            <li>\n              <code>{`${'{{slo}}'}`}</code> = The SLO id that was specified in the SLO query editor\n            </li>\n            <li>\n              <code>{`${'{{selector}}'}`}</code> = The Selector function that was specified in the SLO query editor\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { css, cx } from '@emotion/css';\nimport { useTheme2 } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DataSourceDescription = ({ dataSourceName, docsLink, hasRequiredFields = true, className }) => {\n  const theme = useTheme2();\n  const styles = {\n    container: css({\n      p: {\n        margin: 0\n      },\n      \"p + p\": {\n        marginTop: theme.spacing(2)\n      }\n    }),\n    text: css(__spreadProps(__spreadValues({}, theme.typography.body), {\n      color: theme.colors.text.secondary,\n      a: css({\n        color: theme.colors.text.link,\n        textDecoration: \"underline\",\n        \"&:hover\": {\n          textDecoration: \"none\"\n        }\n      })\n    }))\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cx(styles.container, className) }, /* @__PURE__ */ React.createElement(\"p\", { className: styles.text }, \"Before you can use the \", dataSourceName, \" data source, you must configure it below or in the config file. For detailed instructions,\", \" \", /* @__PURE__ */ React.createElement(\"a\", { href: docsLink, target: \"_blank\", rel: \"noreferrer\" }, \"view the documentation\"), \".\"), hasRequiredFields && /* @__PURE__ */ React.createElement(\"p\", { className: styles.text }, /* @__PURE__ */ React.createElement(\"i\", null, \"Fields marked with * are required\")));\n};\n\nexport { DataSourceDescription };\n//# sourceMappingURL=DataSourceDescription.js.map\n","import React, { useState } from 'react';\nimport { css } from '@emotion/css';\nimport { useTheme2, IconButton } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst GenericConfigSection = ({\n  children,\n  title,\n  description,\n  isCollapsible = false,\n  isInitiallyOpen = true,\n  kind = \"section\",\n  className\n}) => {\n  const { colors, typography, spacing } = useTheme2();\n  const [isOpen, setIsOpen] = useState(isCollapsible ? isInitiallyOpen : true);\n  const iconName = isOpen ? \"angle-up\" : \"angle-down\";\n  const isSubSection = kind === \"sub-section\";\n  const collapsibleButtonAriaLabel = `${isOpen ? \"Collapse\" : \"Expand\"} section ${title}`;\n  const styles = {\n    header: css({\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\"\n    }),\n    title: css({\n      margin: 0\n    }),\n    subtitle: css({\n      margin: 0,\n      fontWeight: typography.fontWeightRegular\n    }),\n    descriptionText: css(__spreadProps(__spreadValues({\n      marginTop: spacing(isSubSection ? 0.25 : 0.5),\n      marginBottom: 0\n    }, typography.bodySmall), {\n      color: colors.text.secondary\n    })),\n    content: css({\n      marginTop: spacing(2)\n    })\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className }, /* @__PURE__ */ React.createElement(\"div\", { className: styles.header }, kind === \"section\" ? /* @__PURE__ */ React.createElement(\"h3\", { className: styles.title }, title) : /* @__PURE__ */ React.createElement(\"h6\", { className: styles.subtitle }, title), isCollapsible && /* @__PURE__ */ React.createElement(\n    IconButton,\n    {\n      name: iconName,\n      onClick: () => setIsOpen(!isOpen),\n      type: \"button\",\n      size: \"xl\",\n      \"aria-label\": collapsibleButtonAriaLabel\n    }\n  )), description && /* @__PURE__ */ React.createElement(\"p\", { className: styles.descriptionText }, description), isOpen && /* @__PURE__ */ React.createElement(\"div\", { className: styles.content }, children));\n};\n\nexport { GenericConfigSection };\n//# sourceMappingURL=GenericConfigSection.js.map\n","import React from 'react';\nimport { GenericConfigSection } from './GenericConfigSection.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst ConfigSection = (_a) => {\n  var _b = _a, { children } = _b, props = __objRest(_b, [\"children\"]);\n  return /* @__PURE__ */ React.createElement(GenericConfigSection, __spreadProps(__spreadValues({}, props), { kind: \"section\" }), children);\n};\n\nexport { ConfigSection };\n//# sourceMappingURL=ConfigSection.js.map\n","import React, { PureComponent } from 'react';\n\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { ConfigSection, DataSourceDescription } from '@grafana/experimental';\nimport { ConnectionConfig } from '@grafana/google-sdk';\nimport { reportInteraction, config } from '@grafana/runtime';\nimport { Divider, SecureSocksProxySettings } from '@grafana/ui';\n\nimport { CloudMonitoringOptions, CloudMonitoringSecureJsonData } from '../../types/types';\n\nexport type Props = DataSourcePluginOptionsEditorProps<CloudMonitoringOptions, CloudMonitoringSecureJsonData>;\n\nexport class ConfigEditor extends PureComponent<Props> {\n  handleOnOptionsChange = (options: Props['options']) => {\n    if (options.jsonData.privateKeyPath || options.secureJsonFields['privateKey']) {\n      reportInteraction('grafana_cloud_monitoring_config_changed', {\n        authenticationType: 'JWT',\n        privateKey: options.secureJsonFields['privateKey'],\n        privateKeyPath: !!options.jsonData.privateKeyPath,\n      });\n    }\n    this.props.onOptionsChange(options);\n  };\n\n  render() {\n    const { options, onOptionsChange } = this.props;\n    return (\n      <>\n        <DataSourceDescription\n          dataSourceName=\"Google Cloud Monitoring\"\n          docsLink=\"https://grafana.com/docs/grafana/latest/datasources/google-cloud-monitoring/\"\n          hasRequiredFields\n        />\n        <Divider />\n        <ConnectionConfig {...this.props} onOptionsChange={this.handleOnOptionsChange}></ConnectionConfig>\n        {config.secureSocksDSProxyEnabled && (\n          <>\n            <Divider />\n            <ConfigSection\n              title=\"Additional settings\"\n              description=\"Additional settings are optional settings that can be configured for more control over your data source. This includes Secure Socks Proxy.\"\n              isCollapsible={true}\n              isInitiallyOpen={options.jsonData.enableSecureSocksProxy !== undefined}\n            >\n              <SecureSocksProxySettings options={options} onOptionsChange={onOptionsChange} />\n            </ConfigSection>\n          </>\n        )}\n      </>\n    );\n  }\n}\n","import { css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { useStyles2 } from '@grafana/ui';\n\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst Stack = (_a) => {\n  var _b = _a, { children } = _b, props = __objRest(_b, [\"children\"]);\n  const styles = useStyles2(useCallback((theme) => getStyles(theme, props), [props]));\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme, props) => {\n  var _a, _b, _c;\n  return {\n    root: css({\n      display: \"flex\",\n      flexDirection: (_a = props.direction) != null ? _a : \"row\",\n      flexWrap: ((_b = props.wrap) != null ? _b : true) ? \"wrap\" : void 0,\n      alignItems: props.alignItems,\n      gap: theme.spacing((_c = props.gap) != null ? _c : 2),\n      flexGrow: props.flexGrow\n    })\n  };\n};\n\nexport { Stack };\n//# sourceMappingURL=Stack.js.map\n","import React from 'react';\nimport { Stack } from './Stack.js';\n\nconst EditorRows = ({ children }) => {\n  return /* @__PURE__ */ React.createElement(Stack, { gap: 0.5, direction: \"column\" }, children);\n};\n\nexport { EditorRows };\n//# sourceMappingURL=EditorRows.js.map\n","import { E2ESelectors } from '@grafana/e2e-selectors';\n\nexport const components = {\n  queryEditor: {\n    container: 'data-testid cloud-monitoring-query-editor',\n    header: {\n      select: 'data-testid cloud-monitoring-header',\n    },\n    visualMetricsQueryEditor: {\n      container: { input: 'data-testid cloud-monitoring-visual-metrics-query-editor' },\n    },\n    mqlMetricsQueryEditor: {\n      container: { input: 'data-testid cloud-monitoring-mql-query-editor' },\n    },\n    sloQueryEditor: {\n      container: {\n        input: 'data-testid cloud-monitoring-slo-query-editor',\n      },\n    },\n    promQlQueryEditor: {\n      container: {\n        input: 'data-testid cloud-monitoring-prom-ql-query-editor',\n      },\n    },\n  },\n};\n\nexport const selectors: { components: E2ESelectors<typeof components> } = {\n  components: components,\n};\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as common from '@grafana/schema';\n\nexport interface CloudMonitoringQuery extends common.DataQuery {\n  /**\n   * Aliases can be set to modify the legend labels. e.g. {{metric.label.xxx}}. See docs for more detail.\n   */\n  aliasBy?: string;\n  /**\n   * Time interval in milliseconds.\n   */\n  intervalMs?: number;\n  /**\n   * PromQL sub-query properties.\n   */\n  promQLQuery?: PromQLQuery;\n  /**\n   * SLO sub-query properties.\n   */\n  sloQuery?: SLOQuery;\n  /**\n   * GCM query type.\n   * queryType: #QueryType\n   * Time Series List sub-query properties.\n   */\n  timeSeriesList?: TimeSeriesList;\n  /**\n   * Time Series sub-query properties.\n   */\n  timeSeriesQuery?: TimeSeriesQuery;\n}\n\n/**\n * Defines the supported queryTypes.\n */\nexport enum QueryType {\n  ANNOTATION = 'annotation',\n  PROMQL = 'promQL',\n  SLO = 'slo',\n  TIME_SERIES_LIST = 'timeSeriesList',\n  TIME_SERIES_QUERY = 'timeSeriesQuery',\n}\n\n/**\n * Time Series List sub-query properties.\n */\nexport interface TimeSeriesList {\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  crossSeriesReducer: string;\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters?: Array<string>;\n  /**\n   * Array of labels to group data by.\n   */\n  groupBys?: Array<string>;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * Preprocessor is not part of the API, but is used to store the preprocessor and not affect the UI for the rest of parameters\n   */\n  preprocessor?: PreprocessorType;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * Only present if a preprocessor is selected. Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  secondaryAlignmentPeriod?: string;\n  /**\n   * Only present if a preprocessor is selected. Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  secondaryCrossSeriesReducer?: string;\n  /**\n   * Only present if a preprocessor is selected. Array of labels to group data by.\n   */\n  secondaryGroupBys?: Array<string>;\n  /**\n   * Only present if a preprocessor is selected. Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  secondaryPerSeriesAligner?: string;\n  /**\n   * Annotation text.\n   */\n  text?: string;\n  /**\n   * Annotation title.\n   */\n  title?: string;\n  /**\n   * Data view, defaults to FULL.\n   */\n  view?: string;\n}\n\nexport const defaultTimeSeriesList: Partial<TimeSeriesList> = {\n  filters: [],\n  groupBys: [],\n  secondaryGroupBys: [],\n};\n\n/**\n * Types of pre-processor available. Defined by the metric.\n */\nexport enum PreprocessorType {\n  Delta = 'delta',\n  None = 'none',\n  Rate = 'rate',\n}\n\n/**\n * Time Series sub-query properties.\n */\nexport interface TimeSeriesQuery {\n  /**\n   * To disable the graphPeriod, it should explictly be set to 'disabled'.\n   */\n  graphPeriod?: ('disabled' | string);\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * MQL query to be executed.\n   */\n  query: string;\n}\n\n/**\n * SLO sub-query properties.\n */\nexport interface SLOQuery {\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * SLO goal value.\n   */\n  goal?: number;\n  /**\n   * Specific lookback period for the SLO.\n   */\n  lookbackPeriod?: string;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * SLO selector.\n   */\n  selectorName: string;\n  /**\n   * ID for the service the SLO is in.\n   */\n  serviceId: string;\n  /**\n   * Name for the service the SLO is in.\n   */\n  serviceName: string;\n  /**\n   * ID for the SLO.\n   */\n  sloId: string;\n  /**\n   * Name of the SLO.\n   */\n  sloName: string;\n}\n\n/**\n * PromQL sub-query properties.\n */\nexport interface PromQLQuery {\n  /**\n   * PromQL expression/query to be executed.\n   */\n  expr: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * PromQL min step\n   */\n  step: string;\n}\n\n/**\n * @deprecated This type is for migration purposes only. Replaced by TimeSeriesList Metric sub-query properties.\n */\nexport interface MetricQuery {\n  /**\n   * Aliases can be set to modify the legend labels. e.g. {{metric.label.xxx}}. See docs for more detail.\n   */\n  aliasBy?: string;\n  /**\n   * Alignment period to use when regularizing data. Defaults to cloud-monitoring-auto.\n   */\n  alignmentPeriod?: string;\n  /**\n   * Reducer applied across a set of time-series values. Defaults to REDUCE_NONE.\n   */\n  crossSeriesReducer: string;\n  editorMode: string;\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters?: Array<string>;\n  /**\n   * To disable the graphPeriod, it should explictly be set to 'disabled'.\n   */\n  graphPeriod?: ('disabled' | string);\n  /**\n   * Array of labels to group data by.\n   */\n  groupBys?: Array<string>;\n  metricKind?: MetricKind;\n  metricType: string;\n  /**\n   * Alignment function to be used. Defaults to ALIGN_MEAN.\n   */\n  perSeriesAligner?: string;\n  /**\n   * Preprocessor is not part of the API, but is used to store the preprocessor and not affect the UI for the rest of parameters\n   */\n  preprocessor?: PreprocessorType;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * MQL query to be executed.\n   */\n  query: string;\n  valueType?: string;\n  view?: string;\n}\n\nexport const defaultMetricQuery: Partial<MetricQuery> = {\n  filters: [],\n  groupBys: [],\n};\n\nexport enum MetricKind {\n  CUMULATIVE = 'CUMULATIVE',\n  DELTA = 'DELTA',\n  GAUGE = 'GAUGE',\n  METRIC_KIND_UNSPECIFIED = 'METRIC_KIND_UNSPECIFIED',\n}\n\nexport enum ValueTypes {\n  BOOL = 'BOOL',\n  DISTRIBUTION = 'DISTRIBUTION',\n  DOUBLE = 'DOUBLE',\n  INT64 = 'INT64',\n  MONEY = 'MONEY',\n  STRING = 'STRING',\n  VALUE_TYPE_UNSPECIFIED = 'VALUE_TYPE_UNSPECIFIED',\n}\n\nexport enum AlignmentTypes {\n  ALIGN_COUNT = 'ALIGN_COUNT',\n  ALIGN_COUNT_FALSE = 'ALIGN_COUNT_FALSE',\n  ALIGN_COUNT_TRUE = 'ALIGN_COUNT_TRUE',\n  ALIGN_DELTA = 'ALIGN_DELTA',\n  ALIGN_FRACTION_TRUE = 'ALIGN_FRACTION_TRUE',\n  ALIGN_INTERPOLATE = 'ALIGN_INTERPOLATE',\n  ALIGN_MAX = 'ALIGN_MAX',\n  ALIGN_MEAN = 'ALIGN_MEAN',\n  ALIGN_MIN = 'ALIGN_MIN',\n  ALIGN_NEXT_OLDER = 'ALIGN_NEXT_OLDER',\n  ALIGN_NONE = 'ALIGN_NONE',\n  ALIGN_PERCENTILE_05 = 'ALIGN_PERCENTILE_05',\n  ALIGN_PERCENTILE_50 = 'ALIGN_PERCENTILE_50',\n  ALIGN_PERCENTILE_95 = 'ALIGN_PERCENTILE_95',\n  ALIGN_PERCENTILE_99 = 'ALIGN_PERCENTILE_99',\n  ALIGN_PERCENT_CHANGE = 'ALIGN_PERCENT_CHANGE',\n  ALIGN_RATE = 'ALIGN_RATE',\n  ALIGN_STDDEV = 'ALIGN_STDDEV',\n  ALIGN_SUM = 'ALIGN_SUM',\n}\n\n/**\n * @deprecated Use TimeSeriesList instead. Legacy annotation query properties for migration purposes.\n */\nexport interface LegacyCloudMonitoringAnnotationQuery {\n  /**\n   * Array of filters to query data by. Labels that can be filtered on are defined by the metric.\n   */\n  filters: Array<string>;\n  metricKind: MetricKind;\n  metricType: string;\n  /**\n   * GCP project to execute the query against.\n   */\n  projectName: string;\n  /**\n   * Query refId.\n   */\n  refId: string;\n  /**\n   * Annotation text.\n   */\n  text: string;\n  /**\n   * Annotation title.\n   */\n  title: string;\n  valueType: string;\n}\n\nexport const defaultLegacyCloudMonitoringAnnotationQuery: Partial<LegacyCloudMonitoringAnnotationQuery> = {\n  filters: [],\n};\n\n/**\n * Query filter representation.\n */\nexport interface Filter {\n  /**\n   * Filter condition.\n   */\n  condition?: string;\n  /**\n   * Filter key.\n   */\n  key: string;\n  /**\n   * Filter operator.\n   */\n  operator: string;\n  /**\n   * Filter value.\n   */\n  value: string;\n}\n\nexport enum MetricFindQueryTypes {\n  Aggregations = 'aggregations',\n  Aligners = 'aligners',\n  AlignmentPeriods = 'alignmentPeriods',\n  DefaultProject = 'defaultProject',\n  LabelKeys = 'labelKeys',\n  LabelValues = 'labelValues',\n  MetricTypes = 'metricTypes',\n  Projects = 'projects',\n  ResourceTypes = 'resourceTypes',\n  SLO = 'slo',\n  SLOServices = 'sloServices',\n  Selectors = 'selectors',\n  Services = 'services',\n}\n\nexport interface GoogleCloudMonitoringDataQuery {}\n","import { cx, css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { useStyles2 } from '@grafana/ui';\n\nconst Space = ({\n  v = 0,\n  h = 0,\n  layout = \"block\"\n}) => {\n  const styles = useStyles2(useCallback((theme) => getStyles(theme, {\n    v,\n    h,\n    layout\n  }), [v, h, layout]));\n  return /* @__PURE__ */ React.createElement(\"span\", { className: cx(styles.wrapper) });\n};\nconst getStyles = (theme, props) => {\n  var _a, _b;\n  return {\n    wrapper: css([\n      {\n        paddingRight: theme.spacing((_a = props.h) != null ? _a : 0),\n        paddingBottom: theme.spacing((_b = props.v) != null ? _b : 0)\n      },\n      props.layout === \"inline\" && {\n        display: \"inline-block\"\n      },\n      props.layout === \"block\" && {\n        display: \"block\"\n      }\n    ])\n  };\n};\n\nexport { Space };\n//# sourceMappingURL=Space.js.map\n","import { css } from '@emotion/css';\nimport React, { useCallback } from 'react';\nimport { Space } from './Space.js';\nimport { useStyles2, ReactUtils, Tooltip, Icon, Field } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst EditorField = (props) => {\n  var _b;\n  const _a = props, { label, optional, tooltip, tooltipInteractive, children, width } = _a, fieldProps = __objRest(_a, [\"label\", \"optional\", \"tooltip\", \"tooltipInteractive\", \"children\", \"width\"]);\n  const styles = useStyles2(useCallback((theme) => getStyles(theme, width), [width]));\n  const childInputId = (fieldProps == null ? void 0 : fieldProps.htmlFor) || ((_b = ReactUtils) == null ? void 0 : _b.getChildId(children));\n  const labelEl = /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"label\", { className: styles.label, htmlFor: childInputId }, label, optional && /* @__PURE__ */ React.createElement(\"span\", { className: styles.optional }, \" - optional\"), tooltip && /* @__PURE__ */ React.createElement(Tooltip, { placement: \"top\", content: tooltip, theme: \"info\", interactive: tooltipInteractive }, /* @__PURE__ */ React.createElement(Icon, { tabIndex: 0, name: \"info-circle\", size: \"sm\", className: styles.icon }))), /* @__PURE__ */ React.createElement(Space, { v: 0.5 }));\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React.createElement(Field, __spreadValues({ className: styles.field, label: labelEl }, fieldProps), children));\n};\nconst getStyles = (theme, width) => {\n  return {\n    root: css({\n      minWidth: theme.spacing(width != null ? width : 0)\n    }),\n    label: css({\n      fontSize: 12,\n      fontWeight: theme.typography.fontWeightMedium\n    }),\n    optional: css({\n      fontStyle: \"italic\",\n      color: theme.colors.text.secondary\n    }),\n    field: css({\n      marginBottom: 0\n      // GrafanaUI/Field has a bottom margin which we must remove\n    }),\n    icon: css({\n      color: theme.colors.text.secondary,\n      marginLeft: theme.spacing(1),\n      \":hover\": {\n        color: theme.colors.text.primary\n      }\n    })\n  };\n};\n\nexport { EditorField };\n//# sourceMappingURL=EditorField.js.map\n","import { debounce } from 'lodash';\nimport React, { useState } from 'react';\n\nimport { EditorField } from '@grafana/experimental';\nimport { Input } from '@grafana/ui';\n\nexport interface Props {\n  refId: string;\n  onChange: (alias: string) => void;\n  value?: string;\n}\n\nexport const AliasBy = ({ refId, value = '', onChange }: Props) => {\n  const [alias, setAlias] = useState(value ?? '');\n\n  const propagateOnChange = debounce(onChange, 1000);\n\n  const onInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setAlias(e.currentTarget.value);\n    propagateOnChange(e.currentTarget.value);\n  };\n\n  return (\n    <EditorField label=\"Alias by\">\n      <Input id={`${refId}-alias-by`} value={alias} onChange={onInputChange} />\n    </EditorField>\n  );\n};\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { Stack } from './Stack.js';\nimport { useStyles2 } from '@grafana/ui';\n\nconst EditorRow = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, /* @__PURE__ */ React.createElement(Stack, { gap: 2 }, children));\n};\nconst getStyles = (theme) => {\n  return {\n    root: css({\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.borderRadius(1)\n    })\n  };\n};\n\nexport { EditorRow };\n//# sourceMappingURL=EditorRow.js.map\n","import { QueryType, MetricKind, ValueTypes } from './types/query';\n\n// not super excited about using uneven numbers, but this makes it align perfectly with rows that has two fields\nexport const INPUT_WIDTH = 71;\nexport const LABEL_WIDTH = 19;\nexport const INNER_LABEL_WIDTH = 14;\nexport const SELECT_WIDTH = 28;\n\nexport const ALIGNMENTS = [\n  {\n    text: 'none',\n    value: 'ALIGN_NONE',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.STRING,\n      ValueTypes.VALUE_TYPE_UNSPECIFIED,\n      ValueTypes.BOOL,\n    ],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'delta',\n    value: 'ALIGN_DELTA',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\n  },\n  {\n    text: 'rate',\n    value: 'ALIGN_RATE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.CUMULATIVE, MetricKind.DELTA],\n  },\n  {\n    text: 'interpolate',\n    value: 'ALIGN_INTERPOLATE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'next older',\n    value: 'ALIGN_NEXT_OLDER',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.STRING,\n      ValueTypes.VALUE_TYPE_UNSPECIFIED,\n      ValueTypes.BOOL,\n    ],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'min',\n    value: 'ALIGN_MIN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'max',\n    value: 'ALIGN_MAX',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'mean',\n    value: 'ALIGN_MEAN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count',\n    value: 'ALIGN_COUNT',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'sum',\n    value: 'ALIGN_SUM',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'stddev',\n    value: 'ALIGN_STDDEV',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count true',\n    value: 'ALIGN_COUNT_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'count false',\n    value: 'ALIGN_COUNT_FALSE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'fraction true',\n    value: 'ALIGN_FRACTION_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE],\n  },\n  {\n    text: 'percentile 99',\n    value: 'ALIGN_PERCENTILE_99',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 95',\n    value: 'ALIGN_PERCENTILE_95',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 50',\n    value: 'ALIGN_PERCENTILE_50',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percentile 05',\n    value: 'ALIGN_PERCENTILE_05',\n    valueTypes: [ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'percent change',\n    value: 'ALIGN_PERCENT_CHANGE',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n];\n\nexport const AGGREGATIONS = [\n  {\n    text: 'none',\n    value: 'REDUCE_NONE',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.BOOL,\n      ValueTypes.STRING,\n    ],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'mean',\n    value: 'REDUCE_MEAN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: 'min',\n    value: 'REDUCE_MIN',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'max',\n    value: 'REDUCE_MAX',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'sum',\n    value: 'REDUCE_SUM',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'std. dev.',\n    value: 'REDUCE_STDDEV',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE, MetricKind.METRIC_KIND_UNSPECIFIED],\n  },\n  {\n    text: 'count',\n    value: 'REDUCE_COUNT',\n    valueTypes: [\n      ValueTypes.INT64,\n      ValueTypes.DOUBLE,\n      ValueTypes.MONEY,\n      ValueTypes.DISTRIBUTION,\n      ValueTypes.BOOL,\n      ValueTypes.STRING,\n    ],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: 'count true',\n    value: 'REDUCE_COUNT_TRUE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: 'count false',\n    value: 'REDUCE_COUNT_FALSE',\n    valueTypes: [ValueTypes.BOOL],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA],\n  },\n  {\n    text: '99th percentile',\n    value: 'REDUCE_PERCENTILE_99',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '95th percentile',\n    value: 'REDUCE_PERCENTILE_95',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '50th percentile',\n    value: 'REDUCE_PERCENTILE_50',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n  {\n    text: '5th percentile',\n    value: 'REDUCE_PERCENTILE_05',\n    valueTypes: [ValueTypes.INT64, ValueTypes.DOUBLE, ValueTypes.MONEY, ValueTypes.DISTRIBUTION],\n    metricKinds: [MetricKind.GAUGE, MetricKind.DELTA, MetricKind.CUMULATIVE],\n  },\n];\n\nexport type periodOption = {\n  text: string;\n  value: string;\n  hidden?: boolean;\n};\n\nexport const ALIGNMENT_PERIODS: periodOption[] = [\n  { text: 'grafana auto', value: 'grafana-auto' },\n  { text: 'stackdriver auto', value: 'stackdriver-auto', hidden: true },\n  { text: 'cloud monitoring auto', value: 'cloud-monitoring-auto' },\n  { text: '1m', value: '+60s' },\n  { text: '2m', value: '+120s' },\n  { text: '5m', value: '+300s' },\n  { text: '10m', value: '+600s' },\n  { text: '30m', value: '+1800s' },\n  { text: '1h', value: '+3600s' },\n  { text: '3h', value: '+7200s' },\n  { text: '6h', value: '+21600s' },\n  { text: '1d', value: '+86400s' },\n  { text: '3d', value: '+259200s' },\n  { text: '1w', value: '+604800s' },\n];\n\nexport const GRAPH_PERIODS: periodOption[] = [\n  { text: 'auto', value: 'auto' },\n  { text: '1m', value: '1m' },\n  { text: '2m', value: '2m' },\n  { text: '5m', value: '5m' },\n  { text: '10m', value: '10m' },\n  { text: '30m', value: '30m' },\n  { text: '1h', value: '1h' },\n  { text: '3h', value: '3h' },\n  { text: '6h', value: '6h' },\n  { text: '1d', value: '1d' },\n  { text: '3d', value: '3d' },\n  { text: '1w', value: '1w' },\n];\n\n// Usable units: ns, us, ms, s, m, h\n// ref. https://cloud.google.com/stackdriver/docs/solutions/slo-monitoring/api/timeseries-selectors#tss-names-args\nexport const LOOKBACK_PERIODS: periodOption[] = [\n  { text: '1m', value: '1m' },\n  { text: '2m', value: '2m' },\n  { text: '5m', value: '5m' },\n  { text: '10m', value: '10m' },\n  { text: '30m', value: '30m' },\n  { text: '1h', value: '1h' },\n  { text: '3h', value: '3h' },\n  { text: '6h', value: '6h' },\n  { text: '24h', value: '24h' },\n  { text: '72h', value: '72h' },\n];\n\nexport const SYSTEM_LABELS = [\n  'metadata.system_labels.cloud_account',\n  'metadata.system_labels.name',\n  'metadata.system_labels.region',\n  'metadata.system_labels.state',\n  'metadata.system_labels.instance_group',\n  'metadata.system_labels.node_name',\n  'metadata.system_labels.service_name',\n  'metadata.system_labels.top_level_controller_type',\n  'metadata.system_labels.top_level_controller_name',\n  'metadata.system_labels.container_image',\n];\n\nexport const SLO_BURN_RATE_SELECTOR_NAME = 'select_slo_burn_rate';\n\nexport const SELECTORS = [\n  { label: 'SLI Value', value: 'select_slo_health' },\n  { label: 'SLO Compliance', value: 'select_slo_compliance' },\n  { label: 'SLO Error Budget Remaining', value: 'select_slo_budget_fraction' },\n  { label: 'SLO Burn Rate', value: SLO_BURN_RATE_SELECTOR_NAME },\n];\n\nexport const QUERY_TYPES = [\n  { label: 'Builder', value: QueryType.TIME_SERIES_LIST },\n  { label: 'MQL', value: QueryType.TIME_SERIES_QUERY },\n  { label: 'Service Level Objectives (SLO)', value: QueryType.SLO },\n  { label: 'PromQL', value: QueryType.PROMQL },\n];\n","import React, { useEffect, useMemo, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\n\nexport interface Props {\n  refId: string;\n  datasource: CloudMonitoringDatasource;\n  onChange: (projectName: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  projectName: string;\n}\n\nexport function Project({ refId, projectName, datasource, onChange, templateVariableOptions }: Props) {\n  const [projects, setProjects] = useState<Array<SelectableValue<string>>>([]);\n  useEffect(() => {\n    datasource.getProjects().then((projects) => setProjects(projects));\n  }, [datasource]);\n\n  const projectsWithTemplateVariables = useMemo(\n    () => [\n      {\n        label: 'Template Variables',\n        options: templateVariableOptions,\n      },\n      ...projects,\n    ],\n    [projects, templateVariableOptions]\n  );\n\n  return (\n    <EditorField label=\"Project\">\n      <Select\n        width=\"auto\"\n        allowCustomValue\n        formatCreateLabel={(v) => `Use project: ${v}`}\n        onChange={({ value }) => onChange(value!)}\n        options={projectsWithTemplateVariables}\n        value={{ value: projectName, label: projectName }}\n        placeholder=\"Select Project\"\n        inputId={`${refId}-project`}\n      />\n    </EditorField>\n  );\n}\n","import React from 'react';\nimport { Stack } from './Stack.js';\n\nconst EditorFieldGroup = ({ children }) => {\n  return /* @__PURE__ */ React.createElement(Stack, { gap: 1 }, children);\n};\n\nexport { EditorFieldGroup };\n//# sourceMappingURL=EditorFieldGroup.js.map\n","import { chunk, initial, startCase, uniqBy } from 'lodash';\n\nimport { rangeUtil } from '@grafana/data';\nimport { getTemplateSrv, TemplateSrv } from '@grafana/runtime';\n\nimport { AGGREGATIONS, ALIGNMENTS, SYSTEM_LABELS } from './constants';\nimport CloudMonitoringDatasource from './datasource';\nimport { AlignmentTypes, PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from './types/query';\nimport { CustomMetaData, MetricDescriptor } from './types/types';\n\nexport const extractServicesFromMetricDescriptors = (metricDescriptors: MetricDescriptor[]) =>\n  uniqBy(metricDescriptors, 'service');\n\nexport const getMetricTypesByService = (metricDescriptors: MetricDescriptor[], service: string) =>\n  metricDescriptors.filter((m: MetricDescriptor) => m.service === service);\n\nexport const getMetricTypes = (\n  metricDescriptors: MetricDescriptor[],\n  metricType: string,\n  interpolatedMetricType: string,\n  selectedService: string\n) => {\n  const metricTypes = getMetricTypesByService(metricDescriptors, selectedService).map((m) => ({\n    value: m.type,\n    name: m.displayName,\n  }));\n  const metricTypeExistInArray = metricTypes.some(\n    (m: { value: string; name: string }) => m.value === interpolatedMetricType\n  );\n  const metricTypeByService = metricTypes.length ? metricTypes[0].value : '';\n  const selectedMetricType = metricTypeExistInArray ? metricType : metricTypeByService;\n  return {\n    metricTypes,\n    selectedMetricType,\n  };\n};\n\nexport const getAlignmentOptionsByMetric = (\n  metricValueType?: string,\n  metricKind?: string,\n  preprocessor?: PreprocessorType\n) => {\n  if (preprocessor && preprocessor === PreprocessorType.Rate) {\n    metricKind = MetricKind.GAUGE;\n  }\n\n  return !metricValueType\n    ? []\n    : ALIGNMENTS.filter((i) => {\n        return (\n          i.valueTypes.indexOf(metricValueType as ValueTypes) !== -1 &&\n          i.metricKinds.indexOf(metricKind as MetricKind) !== -1\n        );\n      });\n};\n\nexport const getAggregationOptionsByMetric = (valueType: ValueTypes, metricKind: MetricKind) => {\n  return !metricKind\n    ? []\n    : AGGREGATIONS.filter((i) => {\n        return i.valueTypes.indexOf(valueType) !== -1 && i.metricKinds.indexOf(metricKind) !== -1;\n      });\n};\n\nexport const getLabelKeys = async (\n  datasource: CloudMonitoringDatasource,\n  selectedMetricType: string,\n  projectName: string\n) => {\n  const refId = 'handleLabelKeysQuery';\n  const labels = await datasource.getLabels(selectedMetricType, refId, projectName);\n  return [...Object.keys(labels), ...SYSTEM_LABELS];\n};\n\nexport const getAlignmentPickerData = (\n  valueType: string | undefined = ValueTypes.DOUBLE,\n  metricKind: string | undefined = MetricKind.GAUGE,\n  perSeriesAligner: string | undefined = AlignmentTypes.ALIGN_MEAN,\n  preprocessor?: PreprocessorType\n) => {\n  const templateSrv: TemplateSrv = getTemplateSrv();\n  const alignOptions = getAlignmentOptionsByMetric(valueType, metricKind, preprocessor).map((option) => ({\n    ...option,\n    label: option.text,\n  }));\n  if (!alignOptions.some((o: { value: string }) => o.value === templateSrv.replace(perSeriesAligner))) {\n    perSeriesAligner = alignOptions.length > 0 ? alignOptions[0].value : AlignmentTypes.ALIGN_MEAN;\n  }\n  return { alignOptions, perSeriesAligner };\n};\n\nexport const labelsToGroupedOptions = (groupBys: string[]) => {\n  const groups = groupBys.reduce<\n    Record<\n      string,\n      Array<{\n        value: string;\n        label: string;\n      }>\n    >\n  >((acc, curr) => {\n    const arr = curr.split('.').map(startCase);\n    const group = (arr.length === 2 ? arr : initial(arr)).join(' ');\n    const option = {\n      value: curr,\n      label: curr,\n    };\n    if (acc[group]) {\n      acc[group] = [...acc[group], option];\n    } else {\n      acc[group] = [option];\n    }\n    return acc;\n  }, {});\n  return Object.entries(groups).map(([label, options]) => ({ label, options, expanded: true }), []);\n};\n\nexport const stringArrayToFilters = (filterArray: string[]) =>\n  chunk(filterArray, 4).map(([key, operator, value, condition = 'AND']) => ({\n    key,\n    operator,\n    value,\n    condition,\n  }));\n\nexport const alignmentPeriodLabel = (customMetaData: CustomMetaData, datasource: CloudMonitoringDatasource) => {\n  const { perSeriesAligner, alignmentPeriod } = customMetaData;\n  if (!alignmentPeriod || !perSeriesAligner) {\n    return '';\n  }\n\n  const alignment = ALIGNMENTS.find((ap) => ap.value === datasource.templateSrv.replace(perSeriesAligner));\n  const seconds = parseInt(alignmentPeriod, 10);\n  const hms = rangeUtil.secondsToHms(seconds);\n  return `${hms} interval (${alignment?.text ?? ''})`;\n};\n\nexport const getMetricType = (query?: TimeSeriesList) => {\n  const metricTypeKey = query?.filters?.findIndex((f) => f === 'metric.type')!;\n  // filters are in the format [key, operator, value] so we need to add 2 to get the value\n  const metricType = query?.filters?.[metricTypeKey + 2];\n  return metricType || '';\n};\n\nexport const setMetricType = (query: TimeSeriesList, metricType: string) => {\n  if (!query.filters) {\n    query.filters = ['metric.type', '=', metricType];\n    return query;\n  }\n  const metricTypeKey = query?.filters?.findIndex((f) => f === 'metric.type')!;\n  if (metricTypeKey === -1) {\n    query.filters.push('metric.type', '=', metricType);\n  } else {\n    // filters are in the format [key, operator, value] so we need to add 2 to get the value\n    query.filters![metricTypeKey + 2] = metricType;\n  }\n  return query;\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { getAggregationOptionsByMetric } from '../functions';\nimport { ValueTypes } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nexport interface Props {\n  refId: string;\n  onChange: (metricDescriptor: string) => void;\n  metricDescriptor?: MetricDescriptor;\n  crossSeriesReducer: string;\n  groupBys: string[];\n  templateVariableOptions: Array<SelectableValue<string>>;\n}\n\nexport const Aggregation = (props: Props) => {\n  const aggOptions = useAggregationOptionsByMetric(props);\n  const selected = useSelectedFromOptions(aggOptions, props);\n\n  return (\n    <EditorField label=\"Group by function\" data-testid=\"cloud-monitoring-aggregation\">\n      <Select\n        width=\"auto\"\n        onChange={({ value }) => props.onChange(value!)}\n        value={selected}\n        options={[\n          {\n            label: 'Template Variables',\n            options: props.templateVariableOptions,\n          },\n          {\n            label: 'Aggregations',\n            expanded: true,\n            options: aggOptions,\n          },\n        ]}\n        placeholder=\"Select Reducer\"\n        inputId={`${props.refId}-group-by-function`}\n        menuPlacement=\"top\"\n      />\n    </EditorField>\n  );\n};\n\nconst useAggregationOptionsByMetric = ({ metricDescriptor }: Props): Array<SelectableValue<string>> => {\n  const valueType = metricDescriptor?.valueType;\n  const metricKind = metricDescriptor?.metricKind;\n\n  return useMemo(() => {\n    if (!valueType || !metricKind) {\n      return [];\n    }\n\n    return getAggregationOptionsByMetric(valueType as ValueTypes, metricKind).map((a) => ({\n      ...a,\n      label: a.text,\n    }));\n  }, [valueType, metricKind]);\n};\n\nconst useSelectedFromOptions = (aggOptions: Array<SelectableValue<string>>, props: Props) => {\n  return useMemo(() => {\n    const allOptions = [...aggOptions, ...props.templateVariableOptions];\n    return allOptions.find((s) => s.value === props.crossSeriesReducer);\n  }, [aggOptions, props.crossSeriesReducer, props.templateVariableOptions]);\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup } from '@grafana/experimental';\nimport { MultiSelect } from '@grafana/ui';\n\nimport { SYSTEM_LABELS } from '../constants';\nimport { labelsToGroupedOptions } from '../functions';\nimport { TimeSeriesList } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nimport { Aggregation } from './Aggregation';\n\nexport interface Props {\n  refId: string;\n  variableOptionGroup: SelectableValue<string>;\n  labels: string[];\n  metricDescriptor?: MetricDescriptor;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n}\n\nexport const GroupBy = ({\n  refId,\n  labels: groupBys = [],\n  query,\n  onChange,\n  variableOptionGroup,\n  metricDescriptor,\n}: Props) => {\n  const options = useMemo(\n    () => [variableOptionGroup, ...labelsToGroupedOptions([...groupBys, ...SYSTEM_LABELS])],\n    [groupBys, variableOptionGroup]\n  );\n\n  return (\n    <EditorFieldGroup>\n      <EditorField\n        label=\"Group by\"\n        tooltip=\"You can reduce the amount of data returned for a metric by combining different time series. To combine multiple time series, you can specify a grouping and a function. Grouping is done on the basis of labels. The grouping function is used to combine the time series in the group into a single time series.\"\n      >\n        <MultiSelect\n          allowCustomValue\n          inputId={`${refId}-group-by`}\n          width=\"auto\"\n          placeholder=\"Choose label\"\n          options={options}\n          value={query.groupBys ?? []}\n          onChange={(options) => {\n            onChange({ ...query, groupBys: options.map((o) => o.value!) });\n          }}\n          menuPlacement=\"top\"\n        />\n      </EditorField>\n      <Aggregation\n        metricDescriptor={metricDescriptor}\n        templateVariableOptions={variableOptionGroup.options}\n        crossSeriesReducer={query.crossSeriesReducer}\n        groupBys={query.groupBys ?? []}\n        onChange={(crossSeriesReducer) => onChange({ ...query, crossSeriesReducer })}\n        refId={refId}\n      />\n    </EditorFieldGroup>\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { getAlignmentPickerData } from '../functions';\nimport { PreprocessorType, SLOQuery, TimeSeriesList } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nexport interface Props {\n  inputId: string;\n  onChange: (query: TimeSeriesList | SLOQuery) => void;\n  query: TimeSeriesList | SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  metricDescriptor?: MetricDescriptor;\n  preprocessor?: PreprocessorType;\n}\n\nexport const AlignmentFunction = ({\n  inputId,\n  query,\n  templateVariableOptions,\n  onChange,\n  metricDescriptor,\n  preprocessor,\n}: Props) => {\n  const { perSeriesAligner: psa } = query;\n  let { valueType, metricKind } = metricDescriptor || {};\n\n  const { perSeriesAligner, alignOptions } = useMemo(\n    () => getAlignmentPickerData(valueType, metricKind, psa, preprocessor),\n    [valueType, metricKind, psa, preprocessor]\n  );\n\n  return (\n    <Select\n      onChange={({ value }) => onChange({ ...query, perSeriesAligner: value! })}\n      value={[...alignOptions, ...templateVariableOptions].find((s) => s.value === perSeriesAligner)}\n      options={[\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        {\n          label: 'Alignment options',\n          expanded: true,\n          options: alignOptions,\n        },\n      ]}\n      placeholder=\"Select Alignment\"\n      inputId={inputId}\n      menuPlacement=\"top\"\n    />\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\nimport { periodOption } from '../constants';\n\nexport interface Props {\n  inputId: string;\n  onChange: (period: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  aligmentPeriods: periodOption[];\n  selectWidth?: number;\n  category?: string;\n  disabled?: boolean;\n  current?: string;\n}\n\nexport function PeriodSelect({\n  inputId,\n  templateVariableOptions,\n  onChange,\n  current,\n  disabled,\n  aligmentPeriods,\n}: Props) {\n  const options = useMemo(\n    () =>\n      aligmentPeriods.map((ap) => ({\n        ...ap,\n        label: ap.text,\n      })),\n    [aligmentPeriods]\n  );\n  const visibleOptions = useMemo(() => options.filter((ap) => !ap.hidden), [options]);\n\n  return (\n    <Select\n      width=\"auto\"\n      onChange={({ value }) => onChange(value!)}\n      value={[...options, ...templateVariableOptions].find((s) => s.value === current)}\n      options={[\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        {\n          label: 'Aggregations',\n          expanded: true,\n          options: visibleOptions,\n        },\n      ]}\n      placeholder=\"Select Period\"\n      inputId={inputId}\n      disabled={disabled}\n      allowCustomValue\n      menuPlacement=\"top\"\n    />\n  );\n}\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup } from '@grafana/experimental';\n\nimport { ALIGNMENT_PERIODS } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { alignmentPeriodLabel } from '../functions';\nimport { PreprocessorType, TimeSeriesList } from '../types/query';\nimport { CustomMetaData, MetricDescriptor } from '../types/types';\n\nimport { AlignmentFunction } from './AlignmentFunction';\nimport { PeriodSelect } from './PeriodSelect';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  customMetaData: CustomMetaData;\n  datasource: CloudMonitoringDatasource;\n  metricDescriptor?: MetricDescriptor;\n  preprocessor?: PreprocessorType;\n}\n\nexport const Alignment = ({\n  refId,\n  templateVariableOptions,\n  onChange,\n  query,\n  customMetaData,\n  datasource,\n  metricDescriptor,\n  preprocessor,\n}: Props) => {\n  const alignmentLabel = useMemo(() => alignmentPeriodLabel(customMetaData, datasource), [customMetaData, datasource]);\n  return (\n    <EditorFieldGroup>\n      <EditorField\n        label=\"Alignment function\"\n        tooltip=\"The process of alignment consists of collecting all data points received in a fixed length of time, applying a function to combine those data points, and assigning a timestamp to the result.\"\n      >\n        <AlignmentFunction\n          inputId={`${refId}-alignment-function`}\n          templateVariableOptions={templateVariableOptions}\n          query={query}\n          onChange={(q) => onChange({ ...query, ...q })}\n          metricDescriptor={metricDescriptor}\n          preprocessor={preprocessor}\n        />\n      </EditorField>\n      <EditorField label=\"Alignment period\" tooltip={alignmentLabel}>\n        <PeriodSelect\n          inputId={`${refId}-alignment-period`}\n          templateVariableOptions={templateVariableOptions}\n          current={query.alignmentPeriod}\n          onChange={(period) => onChange({ ...query, alignmentPeriod: period })}\n          aligmentPeriods={ALIGNMENT_PERIODS}\n        />\n      </EditorField>\n    </EditorFieldGroup>\n  );\n};\n","import { cx, css } from '@emotion/css';\nimport { useStyles2, Button } from '@grafana/ui';\nimport React from 'react';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst AccessoryButton = (_a) => {\n  var _b = _a, { className } = _b, props = __objRest(_b, [\"className\"]);\n  const styles = useStyles2(getButtonStyles);\n  return /* @__PURE__ */ React.createElement(Button, __spreadProps(__spreadValues({}, props), { className: cx(className, styles.button) }));\n};\nconst getButtonStyles = (theme) => ({\n  button: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2)\n  })\n});\n\nexport { AccessoryButton };\n//# sourceMappingURL=AccessoryButton.js.map\n","import { Button } from '@grafana/ui';\nimport React from 'react';\nimport { Stack } from './Stack.js';\n\nconst EditorList = React.forwardRef(function EditorList2({ items, renderItem, onChange }, ref) {\n  const onAddItem = () => {\n    const newItems = [...items, {}];\n    onChange(newItems);\n  };\n  const onChangeItem = (itemIndex, newItem) => {\n    const newItems = [...items];\n    newItems[itemIndex] = newItem;\n    onChange(newItems);\n  };\n  const onDeleteItem = (itemIndex) => {\n    const newItems = [...items];\n    newItems.splice(itemIndex, 1);\n    onChange(newItems);\n  };\n  return /* @__PURE__ */ React.createElement(Stack, null, items.map((item, index) => /* @__PURE__ */ React.createElement(\"div\", { key: index }, renderItem(\n    item,\n    (newItem) => onChangeItem(index, newItem),\n    () => onDeleteItem(index)\n  ))), /* @__PURE__ */ React.createElement(Button, { ref, onClick: onAddItem, variant: \"secondary\", size: \"md\", icon: \"plus\", \"aria-label\": \"Add\", type: \"button\" }));\n});\n\nexport { EditorList };\n//# sourceMappingURL=EditorList.js.map\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue, toOption } from '@grafana/data';\nimport { AccessoryButton, EditorField, EditorList, EditorRow } from '@grafana/experimental';\nimport { HorizontalGroup, Select } from '@grafana/ui';\n\nimport { labelsToGroupedOptions, stringArrayToFilters } from '../functions';\n\nexport interface Props {\n  labels: { [key: string]: string[] };\n  filters: string[];\n  onChange: (filters: string[]) => void;\n  variableOptionGroup: SelectableValue<string>;\n}\n\ninterface Filter {\n  key: string;\n  operator: string;\n  value: string;\n  condition: string;\n}\n\nconst DEFAULT_OPERATOR = '=';\nconst DEFAULT_CONDITION = 'AND';\n\nconst filtersToStringArray = (filters: Filter[]) =>\n  filters.flatMap(({ key, operator, value, condition }) => [key, operator, value, condition]).slice(0, -1);\n\nconst operators = ['=', '!=', '=~', '!=~'].map(toOption);\n\n// These keys are not editable as labels but they have its own selector.\n// For example the 'metric.type' is set with the metric name selector.\nconst protectedFilterKeys = ['metric.type'];\n\nexport const LabelFilter = ({ labels = {}, filters: filterArray, onChange: _onChange, variableOptionGroup }: Props) => {\n  const rawFilters: Filter[] = stringArrayToFilters(filterArray);\n  const filters = rawFilters.filter(({ key }) => !protectedFilterKeys.includes(key));\n  const protectedFilters = rawFilters.filter(({ key }) => protectedFilterKeys.includes(key));\n\n  const options = useMemo(\n    () => [variableOptionGroup, ...labelsToGroupedOptions(Object.keys(labels))],\n    [labels, variableOptionGroup]\n  );\n\n  const getOptions = ({ key = '', value = '' }: Partial<Filter>) => {\n    // Add the current key and value as options if they are manually entered\n    const keyPresent = options.some((op) => {\n      if (op.options) {\n        return options.some((opp) => opp.label === key);\n      }\n      return op.label === key;\n    });\n    if (!keyPresent) {\n      options.push({ label: key, value: key });\n    }\n\n    const valueOptions = labels.hasOwnProperty(key)\n      ? [variableOptionGroup, ...labels[key].map(toOption)]\n      : [variableOptionGroup];\n    const valuePresent = valueOptions.some((op) => op.label === value);\n    if (!valuePresent) {\n      valueOptions.push({ label: value, value });\n    }\n\n    return { options, valueOptions };\n  };\n\n  const onChange = (items: Array<Partial<Filter>>) => {\n    const filters = items.concat(protectedFilters).map(({ key, operator, value, condition }) => ({\n      key: key || '',\n      operator: operator || DEFAULT_OPERATOR,\n      value: value || '',\n      condition: condition || DEFAULT_CONDITION,\n    }));\n    _onChange(filtersToStringArray(filters));\n  };\n\n  const renderItem = (item: Partial<Filter>, onChangeItem: (item: Filter) => void, onDeleteItem: () => void) => {\n    const { key = '', operator = DEFAULT_OPERATOR, value = '', condition = DEFAULT_CONDITION } = item;\n    const { options, valueOptions } = getOptions(item);\n\n    return (\n      <HorizontalGroup spacing=\"xs\" width=\"auto\">\n        <Select\n          aria-label=\"Filter label key\"\n          formatCreateLabel={(v) => `Use label key: ${v}`}\n          allowCustomValue\n          value={key}\n          options={options}\n          onChange={({ value: key = '' }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <Select\n          value={operator}\n          options={operators}\n          onChange={({ value: operator = DEFAULT_OPERATOR }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <Select\n          aria-label=\"Filter label value\"\n          placeholder=\"add filter value\"\n          formatCreateLabel={(v) => `Use label value: ${v}`}\n          allowCustomValue\n          value={value}\n          options={valueOptions}\n          onChange={({ value = '' }) => onChangeItem({ key, operator, value, condition })}\n        />\n        <AccessoryButton aria-label=\"Remove\" icon=\"times\" variant=\"secondary\" onClick={onDeleteItem} type=\"button\" />\n      </HorizontalGroup>\n    );\n  };\n\n  return (\n    <EditorRow>\n      <EditorField\n        label=\"Filter\"\n        tooltip=\"To reduce the amount of data charted, apply a filter. A filter has three components: a label, a comparison, and a value. The comparison can be an equality, inequality, or regular expression.\"\n      >\n        <EditorList items={filters} renderItem={renderItem} onChange={onChange} />\n      </EditorField>\n    </EditorRow>\n  );\n};\n","import React from 'react';\n\nexport const AnnotationsHelp = () => {\n  return (\n    <div className=\"grafana-info-box alert-info\">\n      <div>\n        <h5>Annotation Query Format</h5>\n        <p>\n          An annotation is an event that is overlaid on top of graphs. Annotation rendering is expensive so it is\n          important to limit the number of rows returned.{' '}\n        </p>\n        <p>\n          The Title and Text fields support templating and can use data returned from the query. For example, the Title\n          field could have the following text:\n        </p>\n        <code>\n          {`${'{{metric.type}}'}`} has value: {`${'{{metric.value}}'}`}\n        </code>\n        <p>\n          Example Result: <code>monitoring.googleapis.com/uptime_check/http_status has this value: 502</code>\n        </p>\n        <span>Patterns:</span>\n        <p>\n          <code>{`${'{{metric.value}}'}`}</code> = value of the metric/point\n        </p>\n        <p>\n          <code>{`${'{{metric.type}}'}`}</code> = metric type e.g. compute.googleapis.com/instance/cpu/usage_time\n        </p>\n        <p>\n          <code>{`${'{{metric.name}}'}`}</code> = name part of metric e.g. instance/cpu/usage_time\n        </p>\n        <p>\n          <code>{`${'{{metric.service}}'}`}</code> = service part of metric e.g. compute\n        </p>\n        <p>\n          <code>{`${'{{metric.label.label_name}}'}`}</code> = Metric label metadata e.g. metric.label.instance_name\n        </p>\n        <p>\n          <code>{`${'{{resource.label.label_name}}'}`}</code> = Resource label metadata e.g. resource.label.zone\n        </p>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { LOOKBACK_PERIODS } from '../constants';\n\nexport interface Props {\n  refId: string;\n  onChange: (lookbackPeriod: string) => void;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  current?: string;\n}\n\nexport const LookbackPeriodSelect = ({ refId, current, templateVariableOptions, onChange }: Props) => {\n  const options = LOOKBACK_PERIODS.map((lp) => ({\n    ...lp,\n    label: lp.text,\n  }));\n  if (current && !options.find((op) => op.value === current)) {\n    options.push({ label: current, text: current, value: current, hidden: false });\n  }\n  const visibleOptions = options.filter((lp) => !lp.hidden);\n\n  return (\n    <EditorField label=\"Lookback period\" htmlFor={`${refId}-lookback-period`}>\n      <Select\n        inputId={`${refId}-lookback-period`}\n        width=\"auto\"\n        allowCustomValue\n        value={[...options, ...templateVariableOptions].find((s) => s.value === current)}\n        options={[\n          {\n            label: 'Template Variables',\n            options: templateVariableOptions,\n          },\n          {\n            label: 'Predefined periods',\n            expanded: true,\n            options: visibleOptions,\n          },\n        ]}\n        onChange={({ value }) => onChange(value!)}\n      />\n    </EditorField>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const SLO = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  const [slos, setSLOs] = useState<Array<SelectableValue<string>>>([]);\n  const { projectName, serviceId } = query;\n\n  useEffect(() => {\n    if (!projectName || !serviceId) {\n      return;\n    }\n\n    datasource.getServiceLevelObjectives(projectName, serviceId).then((sloIds: Array<SelectableValue<string>>) => {\n      setSLOs([\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        ...sloIds,\n      ]);\n    });\n  }, [datasource, projectName, serviceId, templateVariableOptions]);\n\n  return (\n    <EditorField label=\"SLO\">\n      <Select\n        inputId={`${refId}-slo`}\n        width=\"auto\"\n        allowCustomValue\n        value={query?.sloId && { value: query?.sloId, label: query?.sloName || query?.sloId }}\n        placeholder=\"Select SLO\"\n        options={slos}\n        onChange={async ({ value: sloId = '', label: sloName = '' }) => {\n          const slos = await datasource.getServiceLevelObjectives(projectName, serviceId);\n          const slo = slos.find(({ value }) => value === datasource.templateSrv.replace(sloId));\n          onChange({ ...query, sloId, sloName, goal: slo?.goal });\n        }}\n      />\n    </EditorField>\n  );\n};\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport { SELECTORS } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const Selector = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  return (\n    <EditorField label=\"Selector\" htmlFor={`${refId}-slo-selector`}>\n      <Select\n        inputId={`${refId}-slo-selector`}\n        width=\"auto\"\n        allowCustomValue\n        value={[...SELECTORS, ...templateVariableOptions].find((s) => s.value === query?.selectorName ?? '')}\n        options={[\n          {\n            label: 'Template Variables',\n            options: templateVariableOptions,\n          },\n          ...SELECTORS,\n        ]}\n        onChange={({ value: selectorName }) => onChange({ ...query, selectorName: selectorName ?? '' })}\n      />\n    </EditorField>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { Select } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { SLOQuery } from '../types/query';\n\nexport interface Props {\n  refId: string;\n  onChange: (query: SLOQuery) => void;\n  query: SLOQuery;\n  templateVariableOptions: Array<SelectableValue<string>>;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const Service = ({ refId, query, templateVariableOptions, onChange, datasource }: Props) => {\n  const [services, setServices] = useState<Array<SelectableValue<string>>>([]);\n  const { projectName } = query;\n\n  useEffect(() => {\n    if (!projectName) {\n      return;\n    }\n\n    datasource.getSLOServices(projectName).then((services: Array<SelectableValue<string>>) => {\n      setServices([\n        {\n          label: 'Template Variables',\n          options: templateVariableOptions,\n        },\n        ...services,\n      ]);\n    });\n  }, [datasource, projectName, templateVariableOptions]);\n\n  return (\n    <EditorField label=\"Service\">\n      <Select\n        inputId={`${refId}-slo-service`}\n        width=\"auto\"\n        allowCustomValue\n        value={query?.serviceId && { value: query?.serviceId, label: query?.serviceName || query?.serviceId }}\n        placeholder=\"Select service\"\n        options={services}\n        onChange={({ value: serviceId = '', label: serviceName = '' }) =>\n          onChange({ ...query, serviceId, serviceName, sloId: '' })\n        }\n      />\n    </EditorField>\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorRow } from '@grafana/experimental';\n\nimport { ALIGNMENT_PERIODS, SLO_BURN_RATE_SELECTOR_NAME } from '../constants';\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { alignmentPeriodLabel } from '../functions';\nimport { AlignmentTypes, SLOQuery } from '../types/query';\nimport { CustomMetaData } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { LookbackPeriodSelect } from './LookbackPeriodSelect';\nimport { PeriodSelect } from './PeriodSelect';\nimport { Project } from './Project';\nimport { SLO } from './SLO';\nimport { Selector } from './Selector';\nimport { Service } from './Service';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: SLOQuery) => void;\n  onRunQuery: () => void;\n  query: SLOQuery;\n  datasource: CloudMonitoringDatasource;\n  aliasBy?: string;\n  onChangeAliasBy: (aliasBy: string) => void;\n}\n\nexport const defaultQuery: (dataSource: CloudMonitoringDatasource) => SLOQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  alignmentPeriod: 'cloud-monitoring-auto',\n  perSeriesAligner: AlignmentTypes.ALIGN_MEAN,\n  aliasBy: '',\n  selectorName: 'select_slo_health',\n  serviceId: '',\n  serviceName: '',\n  sloId: '',\n  sloName: '',\n  lookbackPeriod: '',\n});\n\nexport function SLOQueryEditor({\n  refId,\n  query,\n  datasource,\n  onChange,\n  variableOptionGroup,\n  customMetaData,\n  aliasBy,\n  onChangeAliasBy,\n}: React.PropsWithChildren<Props>) {\n  const alignmentLabel = useMemo(() => alignmentPeriodLabel(customMetaData, datasource), [customMetaData, datasource]);\n  return (\n    <span data-testid={selectors.components.queryEditor.sloQueryEditor.container.input}>\n      <EditorRow>\n        <Project\n          refId={refId}\n          templateVariableOptions={variableOptionGroup.options}\n          projectName={query.projectName}\n          datasource={datasource}\n          onChange={(projectName) => onChange({ ...query, projectName })}\n        />\n        <Service\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        <SLO\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        <Selector\n          refId={refId}\n          datasource={datasource}\n          templateVariableOptions={variableOptionGroup.options}\n          query={query}\n          onChange={onChange}\n        />\n        {query.selectorName === SLO_BURN_RATE_SELECTOR_NAME && (\n          <LookbackPeriodSelect\n            refId={refId}\n            onChange={(lookbackPeriod) => onChange({ ...query, lookbackPeriod: lookbackPeriod })}\n            current={query.lookbackPeriod}\n            templateVariableOptions={variableOptionGroup.options}\n          />\n        )}\n\n        <EditorFieldGroup>\n          <EditorField label=\"Alignment period\" tooltip={alignmentLabel}>\n            <PeriodSelect\n              inputId={`${refId}-alignment-period`}\n              templateVariableOptions={variableOptionGroup.options}\n              current={query.alignmentPeriod}\n              onChange={(period) => onChange({ ...query, alignmentPeriod: period })}\n              aligmentPeriods={ALIGNMENT_PERIODS}\n            />\n          </EditorField>\n        </EditorFieldGroup>\n\n        <AliasBy refId={refId} value={aliasBy} onChange={onChangeAliasBy} />\n      </EditorRow>\n    </span>\n  );\n}\n","import React from 'react';\n\nimport { TextArea } from '@grafana/ui';\n\nimport { selectors } from '../e2e/selectors';\n\nexport interface Props {\n  onChange: (query: string) => void;\n  onRunQuery: () => void;\n  query: string;\n}\n\nexport function MQLQueryEditor({ query, onChange, onRunQuery }: React.PropsWithChildren<Props>) {\n  const onKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.key === 'Enter' && (event.shiftKey || event.ctrlKey)) {\n      event.preventDefault();\n      onRunQuery();\n    }\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.mqlMetricsQueryEditor.container.input}>\n      <TextArea\n        name=\"Query\"\n        className=\"slate-query-field\"\n        value={query}\n        rows={10}\n        placeholder=\"Enter a Cloud Monitoring MQL query (Run with Shift+Enter)\"\n        onBlur={onRunQuery}\n        onChange={(e) => onChange(e.currentTarget.value)}\n        onKeyDown={onKeyDown}\n      />\n    </span>\n  );\n}\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Field, Select } from '@grafana/ui';\n\ninterface VariableQueryFieldProps {\n  onChange: (value: string) => void;\n  options: SelectableValue[];\n  value: string;\n  label: string;\n  allowCustomValue?: boolean;\n}\n\nexport const VariableQueryField = ({\n  label,\n  onChange,\n  value,\n  options,\n  allowCustomValue = false,\n}: VariableQueryFieldProps) => {\n  return (\n    <Field label={label}>\n      <Select\n        width={25}\n        allowCustomValue={allowCustomValue}\n        value={value}\n        onChange={({ value }) => onChange(value!)}\n        options={options}\n      />\n    </Field>\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField } from '@grafana/experimental';\nimport { RadioButtonGroup } from '@grafana/ui';\n\nimport { getAlignmentPickerData } from '../functions';\nimport { PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from '../types/query';\nimport { MetricDescriptor } from '../types/types';\n\nconst NONE_OPTION = { label: 'None', value: PreprocessorType.None };\n\nexport interface Props {\n  metricDescriptor?: MetricDescriptor;\n  onChange: (query: TimeSeriesList) => void;\n  query: TimeSeriesList;\n}\n\nexport const Preprocessor = ({ query, metricDescriptor, onChange }: Props) => {\n  const options = useOptions(metricDescriptor);\n\n  return (\n    <EditorField\n      label=\"Pre-processing\"\n      tooltip=\"Preprocessing options are displayed when the selected metric has a metric kind of delta or cumulative. The specific options available are determined by the metric's value type. If you select 'Rate', data points are aligned and converted to a rate per time series. If you select 'Delta', data points are aligned by their delta (difference) per time series\"\n    >\n      <RadioButtonGroup\n        onChange={(value: PreprocessorType) => {\n          const { perSeriesAligner: psa } = query;\n          const { valueType, metricKind } = metricDescriptor ?? {};\n          const { perSeriesAligner } = getAlignmentPickerData(valueType, metricKind, psa, value);\n          onChange({ ...query, preprocessor: value, perSeriesAligner });\n        }}\n        value={query.preprocessor ?? PreprocessorType.None}\n        options={options}\n      />\n    </EditorField>\n  );\n};\n\nconst useOptions = (metricDescriptor?: MetricDescriptor): Array<SelectableValue<PreprocessorType>> => {\n  const metricKind = metricDescriptor?.metricKind;\n  const valueType = metricDescriptor?.valueType;\n\n  return useMemo(() => {\n    if (!metricKind || metricKind === MetricKind.GAUGE || valueType === ValueTypes.DISTRIBUTION) {\n      return [NONE_OPTION];\n    }\n\n    const options = [\n      NONE_OPTION,\n      {\n        label: 'Rate',\n        value: PreprocessorType.Rate,\n        description: 'Data points are aligned and converted to a rate per time series',\n      },\n    ];\n\n    return metricKind === MetricKind.CUMULATIVE\n      ? [\n          ...options,\n          {\n            label: 'Delta',\n            value: PreprocessorType.Delta,\n            description: 'Data points are aligned by their delta (difference) per time series',\n          },\n        ]\n      : options;\n  }, [metricKind, valueType]);\n};\n","import { css } from '@emotion/css';\nimport debounce from 'debounce-promise';\nimport { startCase, uniqBy } from 'lodash';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { GrafanaTheme2, SelectableValue, TimeRange } from '@grafana/data';\nimport { EditorField, EditorFieldGroup, EditorRow } from '@grafana/experimental';\nimport { reportInteraction } from '@grafana/runtime';\nimport { getSelectStyles, Select, AsyncSelect, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { getAlignmentPickerData, getMetricType, setMetricType } from '../functions';\nimport { PreprocessorType, TimeSeriesList, MetricKind, ValueTypes } from '../types/query';\nimport { CustomMetaData, MetricDescriptor } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { Alignment } from './Alignment';\nimport { GroupBy } from './GroupBy';\nimport { LabelFilter } from './LabelFilter';\nimport { defaultTimeSeriesList } from './MetricQueryEditor';\nimport { Preprocessor } from './Preprocessor';\nimport { Project } from './Project';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  onChange: (query: TimeSeriesList) => void;\n  datasource: CloudMonitoringDatasource;\n  query: TimeSeriesList;\n  variableOptionGroup: SelectableValue<string>;\n  aliasBy?: string;\n  onChangeAliasBy: (aliasBy: string) => void;\n  range: TimeRange;\n}\n\nexport function Editor({\n  refId,\n  onChange,\n  datasource,\n  query,\n  variableOptionGroup,\n  customMetaData,\n  aliasBy,\n  onChangeAliasBy,\n  range,\n}: React.PropsWithChildren<Props>) {\n  const [labels, setLabels] = useState<{ [k: string]: string[] }>({});\n  const [metricDescriptors, setMetricDescriptors] = useState<MetricDescriptor[]>([]);\n  const [metricDescriptor, setMetricDescriptor] = useState<MetricDescriptor>();\n  const [metrics, setMetrics] = useState<Array<SelectableValue<string>>>([]);\n  const [services, setServices] = useState<Array<SelectableValue<string>>>([]);\n  const [service, setService] = useState<string>('');\n  const [timeRange, setTimeRange] = useState<TimeRange>({ ...range });\n\n  const useTime = (time: TimeRange) => {\n    if (\n      timeRange !== null &&\n      (timeRange.raw.from.toString() !== time.raw.from.toString() ||\n        timeRange.raw.to.toString() !== time.raw.to.toString())\n    ) {\n      setTimeRange({ ...time });\n    }\n  };\n\n  useTime(range);\n\n  const theme = useTheme2();\n  const selectStyles = getSelectStyles(theme);\n\n  const customStyle = useStyles2(getStyles);\n\n  const { projectName, groupBys, crossSeriesReducer } = query;\n  const metricType = getMetricType(query);\n  const { templateSrv } = datasource;\n\n  const getSelectedMetricDescriptor = useCallback(\n    (metricDescriptors: MetricDescriptor[], metricType: string) => {\n      return metricDescriptors.find((md) => md.type === templateSrv.replace(metricType))!;\n    },\n    [templateSrv]\n  );\n\n  useEffect(() => {\n    if (projectName && metricType) {\n      datasource\n        .getLabels(metricType, refId, projectName, { groupBys, crossSeriesReducer }, timeRange)\n        .then((labels) => setLabels(labels));\n    }\n  }, [datasource, groupBys, metricType, projectName, refId, crossSeriesReducer, timeRange]);\n\n  useEffect(() => {\n    const loadMetricDescriptors = async () => {\n      if (projectName) {\n        const metricDescriptors = await datasource.getMetricTypes(projectName);\n        reportInteraction('cloud-monitoring-metric-descriptors-loaded', {\n          count: metricDescriptors.length,\n        });\n        const services = getServicesList(metricDescriptors);\n        setMetricDescriptors(metricDescriptors);\n        setServices(services);\n      }\n    };\n    loadMetricDescriptors();\n  }, [datasource, projectName, customStyle, selectStyles.optionDescription]);\n\n  useEffect(() => {\n    const getMetricsList = (metricDescriptors: MetricDescriptor[]) => {\n      const selectedMetricDescriptor = getSelectedMetricDescriptor(metricDescriptors, metricType);\n      if (!selectedMetricDescriptor) {\n        return [];\n      }\n\n      const metricsByService = metricDescriptors\n        .filter((m) => m.service === selectedMetricDescriptor.service)\n        .map((m) => ({\n          service: m.service,\n          value: m.type,\n          label: m.displayName,\n          component: function optionComponent() {\n            return (\n              <div>\n                <div className={customStyle}>{m.type}</div>\n                <div className={selectStyles.optionDescription}>{m.description}</div>\n              </div>\n            );\n          },\n        }));\n      return metricsByService;\n    };\n\n    const metrics = getMetricsList(metricDescriptors);\n    const service = metrics.length > 0 ? metrics[0].service : '';\n    const metricDescriptor = getSelectedMetricDescriptor(metricDescriptors, metricType);\n    setMetricDescriptor(metricDescriptor);\n    setMetrics(metrics);\n    setService(service);\n  }, [metricDescriptors, getSelectedMetricDescriptor, metricType, customStyle, selectStyles.optionDescription]);\n\n  const onServiceChange = ({ value: service }: SelectableValue<string>) => {\n    const metrics = metricDescriptors\n      .filter((m: MetricDescriptor) => m.service === templateSrv.replace(service))\n      .map((m: MetricDescriptor) => ({\n        service: m.service,\n        value: m.type,\n        label: m.displayName,\n        description: m.description,\n      }));\n    // On service change reset all query values except the project name\n    query.filters = [];\n\n    if (metrics.length > 0 && !metrics.some((m) => m.value === templateSrv.replace(metricType))) {\n      onMetricTypeChange(metrics[0]);\n      setService(service!);\n      setMetrics(metrics);\n    } else {\n      setService(service!);\n      setMetrics(metrics);\n    }\n  };\n\n  const getServicesList = (metricDescriptors: MetricDescriptor[]) => {\n    const services = metricDescriptors.map((m) => ({\n      value: m.service,\n      label: startCase(m.serviceShortName),\n    }));\n\n    return services.length > 0 ? uniqBy(services, (s) => s.value) : [];\n  };\n\n  const filterMetrics = async (filter: string) => {\n    const metrics = await datasource.filterMetricsByType(projectName, service);\n    const filtered = metrics\n      .filter((m) => m.type.includes(filter.toLowerCase()))\n      .map((m) => ({\n        value: m.type,\n        label: m.displayName,\n        component: function optionComponent() {\n          return (\n            <div>\n              <div className={customStyle}>{m.type}</div>\n              <div className={selectStyles.optionDescription}>{m.description}</div>\n            </div>\n          );\n        },\n      }));\n    return [\n      {\n        label: 'Template Variables',\n        options: variableOptionGroup.options,\n      },\n      ...filtered,\n    ];\n  };\n\n  const debounceFilter = debounce(filterMetrics, 400);\n\n  const onMetricTypeChange = ({ value }: SelectableValue<string>) => {\n    const metricDescriptor = getSelectedMetricDescriptor(metricDescriptors, value!);\n    setMetricDescriptor(metricDescriptor);\n    const { metricKind, valueType } = metricDescriptor;\n    const preprocessor =\n      metricKind === MetricKind.GAUGE || valueType === ValueTypes.DISTRIBUTION\n        ? PreprocessorType.None\n        : PreprocessorType.Rate;\n    const { perSeriesAligner } = getAlignmentPickerData(valueType, metricKind, query.perSeriesAligner, preprocessor);\n\n    // On metric name change reset query to defaults except project name and filters\n    Object.assign(query, {\n      ...defaultTimeSeriesList(datasource),\n      projectName: query.projectName,\n      filters: query.filters,\n    });\n    onChange({\n      ...setMetricType(\n        {\n          ...query,\n          perSeriesAligner,\n        },\n        value!\n      ),\n      preprocessor,\n    });\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.visualMetricsQueryEditor.container.input}>\n      <EditorRow>\n        <EditorFieldGroup>\n          <Project\n            refId={refId}\n            templateVariableOptions={variableOptionGroup.options}\n            projectName={projectName}\n            datasource={datasource}\n            onChange={(projectName) => {\n              onChange({ ...query, projectName });\n            }}\n          />\n\n          <EditorField label=\"Service\" width=\"auto\">\n            <Select\n              width=\"auto\"\n              onChange={onServiceChange}\n              isLoading={services.length === 0}\n              value={[...services, ...variableOptionGroup.options].find((s) => s.value === service)}\n              options={[\n                {\n                  label: 'Template Variables',\n                  options: variableOptionGroup.options,\n                },\n                ...services,\n              ]}\n              placeholder=\"Select Services\"\n              inputId={`${refId}-service`}\n            />\n          </EditorField>\n          <EditorField label=\"Metric name\" width=\"auto\" htmlFor={`${refId}-select-metric`}>\n            <span title={service === '' ? 'Select a service first' : 'Type to search metrics'}>\n              <AsyncSelect\n                width=\"auto\"\n                onChange={onMetricTypeChange}\n                value={[...metrics, ...variableOptionGroup.options].find((s) => s.value === metricType)}\n                loadOptions={debounceFilter}\n                defaultOptions={[\n                  {\n                    label: 'Template Variables',\n                    options: variableOptionGroup.options,\n                  },\n                  ...metrics.slice(0, 100),\n                ]}\n                placeholder=\"Select Metric\"\n                inputId={`${refId}-select-metric`}\n                disabled={service === ''}\n              />\n            </span>\n          </EditorField>\n        </EditorFieldGroup>\n      </EditorRow>\n\n      <>\n        <LabelFilter\n          labels={labels}\n          filters={query.filters!}\n          onChange={(filters: string[]) => onChange({ ...query, filters })}\n          variableOptionGroup={variableOptionGroup}\n        />\n        <EditorRow>\n          <Preprocessor metricDescriptor={metricDescriptor} query={query} onChange={onChange} />\n          <GroupBy\n            refId={refId}\n            labels={Object.keys(labels)}\n            query={query}\n            onChange={onChange}\n            variableOptionGroup={variableOptionGroup}\n            metricDescriptor={metricDescriptor}\n          />\n          <Alignment\n            refId={refId}\n            datasource={datasource}\n            templateVariableOptions={variableOptionGroup.options}\n            query={query}\n            customMetaData={customMetaData}\n            onChange={onChange}\n            metricDescriptor={metricDescriptor}\n            preprocessor={query.preprocessor}\n          />\n          <AliasBy refId={refId} value={aliasBy} onChange={onChangeAliasBy} />\n        </EditorRow>\n      </>\n    </span>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => css`\n  label: grafana-select-option-description;\n  font-weight: normal;\n  font-style: italic;\n  color: ${theme.colors.text.secondary};\n`;\n\nexport const VisualMetricQueryEditor = React.memo(Editor);\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorRow } from '@grafana/experimental';\nimport { HorizontalGroup, Switch } from '@grafana/ui';\n\nimport { GRAPH_PERIODS } from '../constants';\n\nimport { PeriodSelect } from './index';\n\nexport interface Props {\n  refId: string;\n  onChange: (period: string) => void;\n  variableOptionGroup: SelectableValue<string>;\n  graphPeriod?: string;\n}\n\nexport const GraphPeriod = ({ refId, onChange, graphPeriod, variableOptionGroup }: Props) => {\n  return (\n    <EditorRow>\n      <EditorField\n        label=\"Graph period\"\n        htmlFor={`${refId}-graph-period`}\n        tooltip={\n          <>\n            Set <code>graph_period</code> which forces a preferred period between points. Automatically set to the\n            current interval if left blank.\n          </>\n        }\n      >\n        <HorizontalGroup>\n          <Switch\n            data-testid={`${refId}-switch-graph-period`}\n            value={graphPeriod !== 'disabled'}\n            onChange={(e) => onChange(e.currentTarget.checked ? '' : 'disabled')}\n          />\n          <PeriodSelect\n            inputId={`${refId}-graph-period`}\n            templateVariableOptions={variableOptionGroup.options}\n            current={graphPeriod}\n            onChange={onChange}\n            disabled={graphPeriod === 'disabled'}\n            aligmentPeriods={GRAPH_PERIODS}\n          />\n        </HorizontalGroup>\n      </EditorField>\n    </EditorRow>\n  );\n};\n","import React, { useCallback, useEffect } from 'react';\n\nimport { SelectableValue, TimeRange } from '@grafana/data';\nimport { EditorRows, Stack } from '@grafana/experimental';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { AlignmentTypes, CloudMonitoringQuery, QueryType, TimeSeriesList, TimeSeriesQuery } from '../types/query';\nimport { CustomMetaData } from '../types/types';\n\nimport { AliasBy } from './AliasBy';\nimport { GraphPeriod } from './GraphPeriod';\nimport { MQLQueryEditor } from './MQLQueryEditor';\nimport { Project } from './Project';\nimport { VisualMetricQueryEditor } from './VisualMetricQueryEditor';\n\nexport interface Props {\n  refId: string;\n  customMetaData: CustomMetaData;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: CloudMonitoringQuery) => void;\n  onRunQuery: () => void;\n  query: CloudMonitoringQuery;\n  datasource: CloudMonitoringDatasource;\n  range: TimeRange;\n}\n\nexport const defaultTimeSeriesList: (dataSource: CloudMonitoringDatasource) => TimeSeriesList = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  crossSeriesReducer: 'REDUCE_NONE',\n  alignmentPeriod: 'cloud-monitoring-auto',\n  perSeriesAligner: AlignmentTypes.ALIGN_MEAN,\n  groupBys: [],\n  filters: [],\n});\n\nexport const defaultTimeSeriesQuery: (dataSource: CloudMonitoringDatasource) => TimeSeriesQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  query: '',\n});\n\nfunction Editor({\n  refId,\n  query,\n  datasource,\n  onChange: onQueryChange,\n  onRunQuery,\n  customMetaData,\n  variableOptionGroup,\n  range,\n}: React.PropsWithChildren<Props>) {\n  const onChangeTimeSeriesList = useCallback(\n    (timeSeriesList: TimeSeriesList) => {\n      let filtersComplete = true;\n      if (timeSeriesList?.filters && timeSeriesList.filters.length > 0) {\n        for (const filter of timeSeriesList.filters) {\n          if (filter === '') {\n            filtersComplete = false;\n            break;\n          }\n        }\n      }\n      onQueryChange({ ...query, timeSeriesList });\n      if (filtersComplete) {\n        onRunQuery();\n      }\n    },\n    [onQueryChange, onRunQuery, query]\n  );\n\n  const onChangeTimeSeriesQuery = useCallback(\n    (timeSeriesQuery: TimeSeriesQuery) => {\n      onQueryChange({ ...query, timeSeriesQuery });\n      onRunQuery();\n    },\n    [onQueryChange, onRunQuery, query]\n  );\n\n  useEffect(() => {\n    if (query.queryType === QueryType.TIME_SERIES_LIST && !query.timeSeriesList) {\n      onQueryChange({\n        refId: query.refId,\n        datasource: query.datasource,\n        queryType: QueryType.TIME_SERIES_LIST,\n        timeSeriesList: defaultTimeSeriesList(datasource),\n        aliasBy: query.aliasBy,\n      });\n    }\n    if (query.queryType === QueryType.TIME_SERIES_QUERY && !query.timeSeriesQuery) {\n      onQueryChange({\n        refId: query.refId,\n        datasource: query.datasource,\n        queryType: QueryType.TIME_SERIES_QUERY,\n        timeSeriesQuery: defaultTimeSeriesQuery(datasource),\n        aliasBy: query.aliasBy,\n      });\n    }\n  }, [onQueryChange, query, datasource]);\n\n  return (\n    <EditorRows>\n      {(query.queryType === QueryType.ANNOTATION || query.queryType === QueryType.TIME_SERIES_LIST) &&\n        query.timeSeriesList && (\n          <VisualMetricQueryEditor\n            refId={refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onChangeTimeSeriesList}\n            datasource={datasource}\n            query={query.timeSeriesList}\n            aliasBy={query.aliasBy}\n            onChangeAliasBy={(aliasBy: string) => onQueryChange({ ...query, aliasBy })}\n            range={range}\n          />\n        )}\n\n      {query.queryType === QueryType.TIME_SERIES_QUERY && query.timeSeriesQuery && (\n        <>\n          <Stack gap={1} direction=\"row\">\n            <Project\n              refId={refId}\n              datasource={datasource}\n              onChange={(projectName) =>\n                onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, projectName: projectName })\n              }\n              templateVariableOptions={variableOptionGroup.options}\n              projectName={query.timeSeriesQuery.projectName!}\n            />\n            <AliasBy\n              refId={refId}\n              value={query.aliasBy}\n              onChange={(aliasBy: string) => onQueryChange({ ...query, aliasBy })}\n            />\n          </Stack>\n          <MQLQueryEditor\n            onChange={(q: string) => onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, query: q })}\n            onRunQuery={onRunQuery}\n            query={query.timeSeriesQuery.query}\n          ></MQLQueryEditor>\n          <GraphPeriod\n            onChange={(graphPeriod: string) => onChangeTimeSeriesQuery({ ...query.timeSeriesQuery!, graphPeriod })}\n            graphPeriod={query.timeSeriesQuery.graphPeriod}\n            refId={refId}\n            variableOptionGroup={variableOptionGroup}\n          />\n        </>\n      )}\n    </EditorRows>\n  );\n}\n\nexport const MetricQueryEditor = React.memo(Editor);\n","import React from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { EditorField, EditorRow } from '@grafana/experimental';\nimport { TextArea, Input } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { PromQLQuery } from '../types/query';\n\nimport { Project } from './Project';\n\nexport interface Props {\n  refId: string;\n  variableOptionGroup: SelectableValue<string>;\n  onChange: (query: PromQLQuery) => void;\n  onRunQuery: () => void;\n  query: PromQLQuery;\n  datasource: CloudMonitoringDatasource;\n}\n\nexport const defaultQuery: (dataSource: CloudMonitoringDatasource) => PromQLQuery = (dataSource) => ({\n  projectName: dataSource.getDefaultProject(),\n  expr: '',\n  step: '10s',\n});\n\nexport function PromQLQueryEditor({\n  refId,\n  query,\n  datasource,\n  onChange,\n  variableOptionGroup,\n  onRunQuery,\n}: React.PropsWithChildren<Props>) {\n  function onReturnKeyDown(e: React.KeyboardEvent) {\n    if (e.key === 'Enter' && e.shiftKey) {\n      onRunQuery();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  return (\n    <span data-testid={selectors.components.queryEditor.promQlQueryEditor.container.input}>\n      <EditorRow>\n        <Project\n          refId={refId}\n          templateVariableOptions={variableOptionGroup.options}\n          projectName={query.projectName}\n          datasource={datasource}\n          onChange={(projectName) => onChange({ ...query, projectName })}\n        />\n        <TextArea\n          name=\"Query\"\n          className=\"slate-query-field\"\n          value={query.expr}\n          rows={10}\n          placeholder=\"Enter a Cloud Monitoring Prometheus query (Run with Shift+Enter)\"\n          onBlur={onRunQuery}\n          onKeyDown={onReturnKeyDown}\n          onChange={(e) => onChange({ ...query, expr: e.currentTarget.value })}\n        />\n        <EditorField\n          label=\"Min step\"\n          tooltip={\n            'Time units and built-in variables can be used here, for example: $__interval, $__rate_interval, 5s, 1m, 3h, 1d, 1y (Default if no unit is specified: 10s)'\n          }\n        >\n          <Input\n            type={'string'}\n            placeholder={'auto'}\n            onChange={(e) => onChange({ ...query, step: e.currentTarget.value })}\n            onKeyDown={onReturnKeyDown}\n            value={query.step ?? ''}\n          />\n        </EditorField>\n      </EditorRow>\n    </span>\n  );\n}\n","import { css } from '@emotion/css';\nimport React from 'react';\nimport { useStyles2 } from '@grafana/ui';\n\nconst EditorHeader = ({ children }) => {\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, children);\n};\nconst getStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n    gap: theme.spacing(3),\n    minHeight: theme.spacing(4)\n  })\n});\n\nexport { EditorHeader };\n//# sourceMappingURL=EditorHeader.js.map\n","import { css, cx } from '@emotion/css';\nimport React, { useState } from 'react';\nimport { useStyles2, Select, SelectContainer as SelectContainer$1 } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nfunction InlineSelect(_a) {\n  var _b = _a, { label: labelProp } = _b, props = __objRest(_b, [\"label\"]);\n  const styles = useStyles2(getSelectStyles);\n  const [id] = useState(() => Math.random().toString(16).slice(2));\n  const components = {\n    SelectContainer,\n    ValueContainer,\n    SingleValue: ValueContainer\n  };\n  return /* @__PURE__ */ React.createElement(\"div\", { className: styles.root }, labelProp && /* @__PURE__ */ React.createElement(\"label\", { className: styles.label, htmlFor: id }, labelProp, \":\", \"\\xA0\"), /* @__PURE__ */ React.createElement(Select, __spreadProps(__spreadValues({ openMenuOnFocus: true, inputId: id }, props), { components })));\n}\nconst SelectContainer = (props) => {\n  const { children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React.createElement(SelectContainer$1, __spreadProps(__spreadValues({}, props), { className: cx(props.className, styles.container) }), children);\n};\nconst ValueContainer = (props) => {\n  const { className, children } = props;\n  const styles = useStyles2(getSelectStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", { className: cx(className, styles.valueContainer) }, children);\n};\nconst getSelectStyles = (theme) => ({\n  root: css({\n    display: \"flex\",\n    fontSize: 12,\n    alignItems: \"center\"\n  }),\n  label: css({\n    color: theme.colors.text.secondary,\n    whiteSpace: \"nowrap\"\n  }),\n  container: css({\n    background: \"none\",\n    borderColor: \"transparent\"\n  }),\n  valueContainer: css({\n    display: \"flex\",\n    alignItems: \"center\",\n    flex: \"initial\",\n    color: theme.colors.text.secondary,\n    fontSize: 12\n  })\n});\n\nexport { InlineSelect };\n//# sourceMappingURL=InlineSelect.js.map\n","import React from 'react';\n\nconst FlexItem = ({ grow, shrink }) => {\n  return /* @__PURE__ */ React.createElement(\"div\", { style: { display: \"block\", flexGrow: grow, flexShrink: shrink } });\n};\n\nexport { FlexItem };\n//# sourceMappingURL=FlexItem.js.map\n","import React from 'react';\n\nimport { EditorHeader, FlexItem, InlineSelect } from '@grafana/experimental';\n\nimport { QUERY_TYPES } from '../constants';\nimport { CloudMonitoringQuery } from '../types/query';\n\nexport interface QueryEditorHeaderProps {\n  query: CloudMonitoringQuery;\n  onChange: (value: CloudMonitoringQuery) => void;\n  onRunQuery: () => void;\n}\n\nexport const QueryHeader = (props: QueryEditorHeaderProps) => {\n  const { query, onChange, onRunQuery } = props;\n  const { queryType } = query;\n\n  return (\n    <EditorHeader>\n      <InlineSelect\n        label=\"Query type\"\n        options={QUERY_TYPES}\n        value={queryType}\n        onChange={({ value }) => {\n          onChange({ ...query, queryType: value! });\n          onRunQuery();\n        }}\n      />\n      <FlexItem grow={1} />\n    </EditorHeader>\n  );\n};\n","import React, { PureComponent } from 'react';\n\nimport { QueryEditorProps } from '@grafana/data';\nimport { getTemplateSrv } from '@grafana/runtime';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { extractServicesFromMetricDescriptors, getLabelKeys, getMetricTypes } from '../functions';\nimport { CloudMonitoringQuery, MetricFindQueryTypes } from '../types/query';\nimport {\n  CloudMonitoringOptions,\n  CloudMonitoringVariableQuery,\n  MetricDescriptor,\n  VariableQueryData,\n} from '../types/types';\n\nimport { VariableQueryField } from './';\n\nexport type Props = QueryEditorProps<\n  CloudMonitoringDatasource,\n  CloudMonitoringQuery,\n  CloudMonitoringOptions,\n  CloudMonitoringVariableQuery\n>;\n\nexport class CloudMonitoringVariableQueryEditor extends PureComponent<Props, VariableQueryData> {\n  queryTypes: Array<{ value: string; label: string }> = [\n    { value: MetricFindQueryTypes.Projects, label: 'Projects' },\n    { value: MetricFindQueryTypes.Services, label: 'Services' },\n    { value: MetricFindQueryTypes.MetricTypes, label: 'Metric Types' },\n    { value: MetricFindQueryTypes.LabelKeys, label: 'Label Keys' },\n    { value: MetricFindQueryTypes.LabelValues, label: 'Label Values' },\n    { value: MetricFindQueryTypes.ResourceTypes, label: 'Resource Types' },\n    { value: MetricFindQueryTypes.Aggregations, label: 'Aggregations' },\n    { value: MetricFindQueryTypes.Aligners, label: 'Aligners' },\n    { value: MetricFindQueryTypes.AlignmentPeriods, label: 'Alignment Periods' },\n    { value: MetricFindQueryTypes.Selectors, label: 'Selectors' },\n    { value: MetricFindQueryTypes.SLOServices, label: 'SLO Services' },\n    { value: MetricFindQueryTypes.SLO, label: 'Service Level Objectives (SLO)' },\n  ];\n\n  defaults: VariableQueryData = {\n    selectedQueryType: this.queryTypes[0].value,\n    metricDescriptors: [],\n    selectedService: '',\n    selectedMetricType: '',\n    labels: [],\n    labelKey: '',\n    metricTypes: [],\n    services: [],\n    sloServices: [],\n    selectedSLOService: '',\n    projects: [],\n    projectName: '',\n    loading: true,\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this.state = Object.assign(this.defaults, this.props.query);\n  }\n\n  async componentDidMount() {\n    await this.props.datasource.ensureGCEDefaultProject();\n    const projectName = this.props.query.projectName || this.props.datasource.getDefaultProject();\n    const projects = (await this.props.datasource.getProjects()) as MetricDescriptor[];\n    const metricDescriptors = await this.props.datasource.getMetricTypes(\n      this.props.query.projectName || this.props.datasource.getDefaultProject()\n    );\n    const services = extractServicesFromMetricDescriptors(metricDescriptors).map((m) => ({\n      value: m.service,\n      label: m.serviceShortName,\n    }));\n\n    let selectedService = '';\n    if (services.some((s) => s.value === getTemplateSrv().replace(this.state.selectedService))) {\n      selectedService = this.state.selectedService;\n    } else if (services && services.length > 0) {\n      selectedService = services[0].value;\n    }\n\n    const { metricTypes, selectedMetricType } = getMetricTypes(\n      metricDescriptors,\n      this.state.selectedMetricType,\n      getTemplateSrv().replace(this.state.selectedMetricType),\n      getTemplateSrv().replace(selectedService)\n    );\n\n    const sloServices = await this.props.datasource.getSLOServices(projectName);\n\n    const state = {\n      services,\n      selectedService,\n      metricTypes,\n      selectedMetricType,\n      metricDescriptors,\n      projects,\n      ...(await this.getLabels(selectedMetricType, projectName)),\n      sloServices,\n      loading: false,\n      projectName,\n    };\n    this.setState(state, () => this.onPropsChange());\n  }\n\n  onPropsChange = () => {\n    const { metricDescriptors, labels, metricTypes, services, ...queryModel } = this.state;\n    this.props.onChange({ ...queryModel, refId: 'CloudMonitoringVariableQueryEditor-VariableQuery' });\n  };\n\n  async onQueryTypeChange(queryType: string) {\n    const state = {\n      selectedQueryType: queryType,\n      ...(await this.getLabels(this.state.selectedMetricType, this.state.projectName, queryType)),\n    };\n\n    this.setState(state);\n  }\n\n  async onProjectChange(projectName: string) {\n    const metricDescriptors = await this.props.datasource.getMetricTypes(projectName);\n    const labels = await this.getLabels(this.state.selectedMetricType, projectName);\n    const { metricTypes, selectedMetricType } = getMetricTypes(\n      metricDescriptors,\n      this.state.selectedMetricType,\n      getTemplateSrv().replace(this.state.selectedMetricType),\n      getTemplateSrv().replace(this.state.selectedService)\n    );\n\n    const sloServices = await this.props.datasource.getSLOServices(projectName);\n\n    this.setState(\n      {\n        ...labels,\n        metricTypes,\n        selectedMetricType,\n        metricDescriptors,\n        projectName,\n        sloServices,\n      },\n      () => this.onPropsChange()\n    );\n  }\n\n  async onServiceChange(service: string) {\n    const { metricTypes, selectedMetricType } = getMetricTypes(\n      this.state.metricDescriptors,\n      this.state.selectedMetricType,\n      getTemplateSrv().replace(this.state.selectedMetricType),\n      getTemplateSrv().replace(service)\n    );\n    const state = {\n      selectedService: service,\n      metricTypes,\n      selectedMetricType,\n      ...(await this.getLabels(selectedMetricType, this.state.projectName)),\n    };\n    this.setState(state, () => this.onPropsChange());\n  }\n\n  async onMetricTypeChange(metricType: string) {\n    const state = {\n      selectedMetricType: metricType,\n      ...(await this.getLabels(getTemplateSrv().replace(metricType), this.state.projectName)),\n    };\n    this.setState(state, () => this.onPropsChange());\n  }\n\n  onLabelKeyChange(labelKey: string) {\n    this.setState({ labelKey }, () => this.onPropsChange());\n  }\n\n  componentDidUpdate(prevProps: Readonly<Props>, prevState: Readonly<VariableQueryData>) {\n    const selecQueryTypeChanged = prevState.selectedQueryType !== this.state.selectedQueryType;\n    const selectSLOServiceChanged = this.state.selectedSLOService !== prevState.selectedSLOService;\n    if (selecQueryTypeChanged || selectSLOServiceChanged) {\n      this.onPropsChange();\n    }\n  }\n\n  async getLabels(selectedMetricType: string, projectName: string, selectedQueryType = this.state.selectedQueryType) {\n    let result = { labels: this.state.labels, labelKey: this.state.labelKey };\n    if (selectedMetricType && selectedQueryType === MetricFindQueryTypes.LabelValues) {\n      const labels = await getLabelKeys(this.props.datasource, selectedMetricType, projectName);\n      const labelKey = labels.some((l) => l === getTemplateSrv().replace(this.state.labelKey))\n        ? this.state.labelKey\n        : labels[0];\n      result = { labels, labelKey };\n    }\n    return result;\n  }\n\n  renderQueryTypeSwitch(queryType: string) {\n    const variableOptionGroup = {\n      label: 'Template Variables',\n      expanded: false,\n      options: getTemplateSrv()\n        .getVariables()\n        .map((v) => ({\n          value: `$${v.name}`,\n          label: `$${v.name}`,\n        })),\n    };\n\n    switch (queryType) {\n      case MetricFindQueryTypes.MetricTypes:\n        return (\n          <>\n            <VariableQueryField\n              allowCustomValue={true}\n              value={this.state.projectName}\n              options={[variableOptionGroup, ...this.state.projects]}\n              onChange={(value) => this.onProjectChange(value)}\n              label=\"Project\"\n            />\n            <VariableQueryField\n              value={this.state.selectedService}\n              options={[variableOptionGroup, ...this.state.services]}\n              onChange={(value) => this.onServiceChange(value)}\n              label=\"Service\"\n            />\n          </>\n        );\n      case MetricFindQueryTypes.LabelKeys:\n      case MetricFindQueryTypes.LabelValues:\n      case MetricFindQueryTypes.ResourceTypes:\n        return (\n          <>\n            <VariableQueryField\n              allowCustomValue={true}\n              value={this.state.projectName}\n              options={[variableOptionGroup, ...this.state.projects]}\n              onChange={(value) => this.onProjectChange(value)}\n              label=\"Project\"\n            />\n            <VariableQueryField\n              value={this.state.selectedService}\n              options={[variableOptionGroup, ...this.state.services]}\n              onChange={(value) => this.onServiceChange(value)}\n              label=\"Service\"\n            />\n            <VariableQueryField\n              value={this.state.selectedMetricType}\n              options={[\n                variableOptionGroup,\n                ...this.state.metricTypes.map(({ value, name }) => ({ value, label: name })),\n              ]}\n              onChange={(value) => this.onMetricTypeChange(value)}\n              label=\"Metric Type\"\n            />\n            {queryType === MetricFindQueryTypes.LabelValues && (\n              <VariableQueryField\n                value={this.state.labelKey}\n                options={[variableOptionGroup, ...this.state.labels.map((l) => ({ value: l, label: l }))]}\n                onChange={(value) => this.onLabelKeyChange(value)}\n                label=\"Label Key\"\n              />\n            )}\n          </>\n        );\n      case MetricFindQueryTypes.Aligners:\n      case MetricFindQueryTypes.Aggregations:\n        return (\n          <>\n            <VariableQueryField\n              value={this.state.selectedService}\n              options={[variableOptionGroup, ...this.state.services]}\n              onChange={(value) => this.onServiceChange(value)}\n              label=\"Service\"\n            />\n            <VariableQueryField\n              value={this.state.selectedMetricType}\n              options={[\n                variableOptionGroup,\n                ...this.state.metricTypes.map(({ value, name }) => ({ value, label: name })),\n              ]}\n              onChange={(value) => this.onMetricTypeChange(value)}\n              label=\"Metric Type\"\n            />\n          </>\n        );\n      case MetricFindQueryTypes.Services:\n      case MetricFindQueryTypes.SLOServices:\n        return (\n          <>\n            <VariableQueryField\n              allowCustomValue={true}\n              value={this.state.projectName}\n              options={[variableOptionGroup, ...this.state.projects]}\n              onChange={(value) => this.onProjectChange(value)}\n              label=\"Project\"\n            />\n          </>\n        );\n\n      case MetricFindQueryTypes.SLO:\n        return (\n          <>\n            <VariableQueryField\n              allowCustomValue={true}\n              value={this.state.projectName}\n              options={[variableOptionGroup, ...this.state.projects]}\n              onChange={(value) => this.onProjectChange(value)}\n              label=\"Project\"\n            />\n            <VariableQueryField\n              value={this.state.selectedSLOService}\n              options={[variableOptionGroup, ...this.state.sloServices]}\n              onChange={(value) => {\n                this.setState({\n                  ...this.state,\n                  selectedSLOService: value,\n                });\n              }}\n              label=\"SLO Service\"\n            />\n          </>\n        );\n      default:\n        return '';\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <VariableQueryField\n          value={'loading'}\n          options={[{ value: 'loading', label: 'Loading...' }]}\n          onChange={(value) => null}\n          label=\"Query Type\"\n        />\n      );\n    }\n\n    return (\n      <>\n        <VariableQueryField\n          value={this.state.selectedQueryType}\n          options={this.queryTypes}\n          onChange={(value) => this.onQueryTypeChange(value)}\n          label=\"Query Type\"\n        />\n        {this.renderQueryTypeSwitch(this.state.selectedQueryType)}\n      </>\n    );\n  }\n}\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { useEffect } from 'react';\nimport useTimeoutFn from './useTimeoutFn';\nexport default function useDebounce(fn, ms, deps) {\n    if (ms === void 0) { ms = 0; }\n    if (deps === void 0) { deps = []; }\n    var _a = useTimeoutFn(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];\n    useEffect(reset, deps);\n    return [isReady, cancel];\n}\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useTimeoutFn(fn, ms) {\n    if (ms === void 0) { ms = 0; }\n    var ready = useRef(false);\n    var timeout = useRef();\n    var callback = useRef(fn);\n    var isReady = useCallback(function () { return ready.current; }, []);\n    var set = useCallback(function () {\n        ready.current = false;\n        timeout.current && clearTimeout(timeout.current);\n        timeout.current = setTimeout(function () {\n            ready.current = true;\n            callback.current();\n        }, ms);\n    }, [ms]);\n    var clear = useCallback(function () {\n        ready.current = null;\n        timeout.current && clearTimeout(timeout.current);\n    }, []);\n    // update ref when function changes\n    useEffect(function () {\n        callback.current = fn;\n    }, [fn]);\n    // set on mount, clear on unmount\n    useEffect(function () {\n        set();\n        return clear;\n    }, [ms]);\n    return [isReady, clear, set];\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDebounce } from 'react-use';\n\nimport { QueryEditorProps, getDefaultTimeRange, toOption } from '@grafana/data';\nimport { EditorField, EditorRows } from '@grafana/experimental';\nimport { Input } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { TimeSeriesList, CloudMonitoringQuery, QueryType } from '../types/query';\nimport { CloudMonitoringOptions } from '../types/types';\n\nimport { MetricQueryEditor, defaultTimeSeriesList } from './MetricQueryEditor';\n\nimport { AnnotationsHelp } from './';\n\nexport type Props = QueryEditorProps<CloudMonitoringDatasource, CloudMonitoringQuery, CloudMonitoringOptions>;\n\nexport const defaultQuery: (datasource: CloudMonitoringDatasource) => TimeSeriesList = (datasource) => ({\n  ...defaultTimeSeriesList(datasource),\n  title: '',\n  text: '',\n});\n\nexport const AnnotationQueryEditor = (props: Props) => {\n  const { datasource, query, onRunQuery, data, onChange, range } = props;\n  const meta = data?.series.length ? data?.series[0].meta : {};\n  const customMetaData = meta?.custom ?? {};\n  const timeSeriesList = { ...defaultQuery(datasource), ...query.timeSeriesList };\n  const [title, setTitle] = useState(timeSeriesList.title || '');\n  const [text, setText] = useState(timeSeriesList.text || '');\n  const variableOptionGroup = {\n    label: 'Template Variables',\n    options: datasource.getVariables().map(toOption),\n  };\n\n  const handleTitleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(e.target.value);\n  };\n  const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  useDebounce(\n    () => {\n      onChange({ ...query, timeSeriesList: { ...timeSeriesList, title } });\n    },\n    1000,\n    [title, onChange]\n  );\n  useDebounce(\n    () => {\n      onChange({ ...query, timeSeriesList: { ...timeSeriesList, text } });\n    },\n    1000,\n    [text, onChange]\n  );\n\n  // Use a known query type\n  useEffect(() => {\n    if (!query.queryType || !Object.values(QueryType).includes(query.queryType)) {\n      onChange({ ...query, queryType: QueryType.TIME_SERIES_LIST });\n    }\n  });\n\n  return (\n    <EditorRows>\n      <>\n        <MetricQueryEditor\n          refId={query.refId}\n          variableOptionGroup={variableOptionGroup}\n          customMetaData={customMetaData}\n          onChange={onChange}\n          onRunQuery={onRunQuery}\n          datasource={datasource}\n          query={query}\n          range={range || getDefaultTimeRange()}\n        />\n        <EditorField label=\"Title\" htmlFor=\"annotation-query-title\">\n          <Input id=\"annotation-query-title\" value={title} onChange={handleTitleChange} />\n        </EditorField>\n        <EditorField label=\"Text\" htmlFor=\"annotation-query-text\">\n          <Input id=\"annotation-query-text\" value={text} onChange={handleTextChange} />\n        </EditorField>\n      </>\n      <AnnotationsHelp />\n    </EditorRows>\n  );\n};\n","import { AnnotationSupport, AnnotationQuery } from '@grafana/data';\n\nimport { AnnotationQueryEditor } from './components/AnnotationQueryEditor';\nimport CloudMonitoringDatasource from './datasource';\nimport { AlignmentTypes, CloudMonitoringQuery, QueryType, LegacyCloudMonitoringAnnotationQuery } from './types/query';\n\n// The legacy query format sets the title and text values to empty strings by default.\n// If the title or text is not undefined at the top-level of the annotation target,\n// then it is a legacy query.\nconst isLegacyCloudMonitoringAnnotation = (\n  query: unknown\n): query is AnnotationQuery<LegacyCloudMonitoringAnnotationQuery> =>\n  (query as AnnotationQuery<LegacyCloudMonitoringAnnotationQuery>).target?.title !== undefined ||\n  (query as AnnotationQuery<LegacyCloudMonitoringAnnotationQuery>).target?.text !== undefined;\n\nexport const CloudMonitoringAnnotationSupport: (\n  ds: CloudMonitoringDatasource\n) => AnnotationSupport<CloudMonitoringQuery> = (ds: CloudMonitoringDatasource) => {\n  return {\n    prepareAnnotation: (\n      query: AnnotationQuery<LegacyCloudMonitoringAnnotationQuery> | AnnotationQuery<CloudMonitoringQuery>\n    ): AnnotationQuery<CloudMonitoringQuery> => {\n      if (!isLegacyCloudMonitoringAnnotation(query)) {\n        return query;\n      }\n\n      const { enable, name, iconColor } = query;\n      const { target } = query;\n      const result: AnnotationQuery<CloudMonitoringQuery> = {\n        datasource: query.datasource,\n        enable,\n        name,\n        iconColor,\n        target: {\n          intervalMs: ds.intervalMs,\n          refId: target?.refId || 'annotationQuery',\n          queryType: QueryType.ANNOTATION,\n          timeSeriesList: {\n            projectName: target?.projectName || ds.getDefaultProject(),\n            filters: target?.filters || [],\n            crossSeriesReducer: 'REDUCE_NONE',\n            perSeriesAligner: AlignmentTypes.ALIGN_NONE,\n            title: target?.title || '',\n            text: target?.text || '',\n          },\n        },\n      };\n      return result;\n    },\n    prepareQuery: (anno: AnnotationQuery<CloudMonitoringQuery>) => {\n      if (!anno.target) {\n        return undefined;\n      }\n\n      return {\n        ...anno.target,\n        queryType: QueryType.ANNOTATION,\n        type: 'annotationQuery',\n      };\n    },\n    QueryEditor: AnnotationQueryEditor,\n  };\n};\n","import { isString } from 'lodash';\n\nimport { ALIGNMENT_PERIODS, SELECTORS } from './constants';\nimport CloudMonitoringDatasource from './datasource';\nimport {\n  extractServicesFromMetricDescriptors,\n  getAggregationOptionsByMetric,\n  getAlignmentOptionsByMetric,\n  getLabelKeys,\n  getMetricTypesByService,\n} from './functions';\nimport { ValueTypes, MetricFindQueryTypes } from './types/query';\nimport { CloudMonitoringVariableQuery, MetricDescriptor } from './types/types';\n\nexport default class CloudMonitoringMetricFindQuery {\n  constructor(private datasource: CloudMonitoringDatasource) {}\n\n  async execute(query: CloudMonitoringVariableQuery) {\n    try {\n      if (!query.projectName) {\n        query.projectName = this.datasource.getDefaultProject();\n      }\n\n      switch (query.selectedQueryType) {\n        case MetricFindQueryTypes.Projects:\n          return this.handleProjectsQuery();\n        case MetricFindQueryTypes.Services:\n          return this.handleServiceQuery(query);\n        case MetricFindQueryTypes.MetricTypes:\n          return this.handleMetricTypesQuery(query);\n        case MetricFindQueryTypes.LabelKeys:\n          return this.handleLabelKeysQuery(query);\n        case MetricFindQueryTypes.LabelValues:\n          return this.handleLabelValuesQuery(query);\n        case MetricFindQueryTypes.ResourceTypes:\n          return this.handleResourceTypeQuery(query);\n        case MetricFindQueryTypes.Aligners:\n          return this.handleAlignersQuery(query);\n        case MetricFindQueryTypes.AlignmentPeriods:\n          return this.handleAlignmentPeriodQuery();\n        case MetricFindQueryTypes.Aggregations:\n          return this.handleAggregationQuery(query);\n        case MetricFindQueryTypes.SLOServices:\n          return this.handleSLOServicesQuery(query);\n        case MetricFindQueryTypes.SLO:\n          return this.handleSLOQuery(query);\n        case MetricFindQueryTypes.Selectors:\n          return this.handleSelectorQuery();\n        default:\n          return [];\n      }\n    } catch (error) {\n      console.error(`Could not run CloudMonitoringMetricFindQuery ${query}`, error);\n      return [];\n    }\n  }\n\n  async handleProjectsQuery() {\n    const projects = await this.datasource.getProjects();\n    return projects.map((s) => ({\n      text: s.label,\n      value: s.value,\n      expandable: true,\n    }));\n  }\n\n  async handleServiceQuery({ projectName }: CloudMonitoringVariableQuery) {\n    const metricDescriptors = await this.datasource.getMetricTypes(projectName);\n    const services: MetricDescriptor[] = extractServicesFromMetricDescriptors(metricDescriptors);\n    return services.map((s) => ({\n      text: s.serviceShortName,\n      value: s.service,\n      expandable: true,\n    }));\n  }\n\n  async handleMetricTypesQuery({ selectedService, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedService) {\n      return [];\n    }\n    const metricDescriptors = await this.datasource.getMetricTypes(projectName);\n    return getMetricTypesByService(metricDescriptors, this.datasource.templateSrv.replace(selectedService)).map(\n      (s) => ({\n        text: s.displayName,\n        value: s.type,\n        expandable: true,\n      })\n    );\n  }\n\n  async handleLabelKeysQuery({ selectedMetricType, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedMetricType) {\n      return [];\n    }\n    const labelKeys = await getLabelKeys(this.datasource, selectedMetricType, projectName);\n    return labelKeys.map(this.toFindQueryResult);\n  }\n\n  async handleLabelValuesQuery({ selectedMetricType, labelKey, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedMetricType) {\n      return [];\n    }\n    const refId = 'handleLabelValuesQuery';\n    // REDUCE_MEAN is needed so the groupBy is not ignored\n    const labels = await this.datasource.getLabels(selectedMetricType, refId, projectName, {\n      groupBys: [labelKey],\n      crossSeriesReducer: 'REDUCE_MEAN',\n    });\n    const interpolatedKey = this.datasource.templateSrv.replace(labelKey);\n    const values = labels.hasOwnProperty(interpolatedKey) ? labels[interpolatedKey] : [];\n    return values.map(this.toFindQueryResult);\n  }\n\n  async handleResourceTypeQuery({ selectedMetricType, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedMetricType) {\n      return [];\n    }\n    const refId = 'handleResourceTypeQueryQueryType';\n    const labels = await this.datasource.getLabels(selectedMetricType, refId, projectName);\n    return labels['resource.type']?.map(this.toFindQueryResult) ?? [];\n  }\n\n  async handleAlignersQuery({ selectedMetricType, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedMetricType) {\n      return [];\n    }\n    const metricDescriptors = await this.datasource.getMetricTypes(projectName);\n    const descriptor = metricDescriptors.find(\n      (m) => m.type === this.datasource.templateSrv.replace(selectedMetricType)\n    );\n\n    if (!descriptor) {\n      return [];\n    }\n\n    return getAlignmentOptionsByMetric(descriptor.valueType, descriptor.metricKind).map(this.toFindQueryResult);\n  }\n\n  async handleAggregationQuery({ selectedMetricType, projectName }: CloudMonitoringVariableQuery) {\n    if (!selectedMetricType) {\n      return [];\n    }\n\n    const metricDescriptors = await this.datasource.getMetricTypes(projectName);\n    const descriptor = metricDescriptors.find(\n      (m) => m.type === this.datasource.templateSrv.replace(selectedMetricType)\n    );\n\n    if (!descriptor) {\n      return [];\n    }\n\n    return getAggregationOptionsByMetric(descriptor.valueType as ValueTypes, descriptor.metricKind).map(\n      this.toFindQueryResult\n    );\n  }\n\n  async handleSLOServicesQuery({ projectName }: CloudMonitoringVariableQuery) {\n    const services = await this.datasource.getSLOServices(projectName);\n    return services.map(this.toFindQueryResult);\n  }\n\n  async handleSLOQuery({ selectedSLOService, projectName }: CloudMonitoringVariableQuery) {\n    const slos = await this.datasource.getServiceLevelObjectives(projectName, selectedSLOService);\n    return slos.map(this.toFindQueryResult);\n  }\n\n  async handleSelectorQuery() {\n    return SELECTORS.map(this.toFindQueryResult);\n  }\n\n  handleAlignmentPeriodQuery() {\n    return ALIGNMENT_PERIODS.map(this.toFindQueryResult);\n  }\n\n  toFindQueryResult(x: any) {\n    return isString(x) ? { text: x, expandable: true } : { ...x, expandable: true };\n  }\n}\n","import { from, Observable } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\n\nimport { CustomVariableSupport, DataQueryRequest, DataQueryResponse } from '@grafana/data';\n\nimport CloudMonitoringMetricFindQuery from './CloudMonitoringMetricFindQuery';\nimport { CloudMonitoringVariableQueryEditor } from './components/VariableQueryEditor';\nimport CloudMonitoringDatasource from './datasource';\nimport { CloudMonitoringVariableQuery } from './types/types';\n\nexport class CloudMonitoringVariableSupport extends CustomVariableSupport<\n  CloudMonitoringDatasource,\n  CloudMonitoringVariableQuery\n> {\n  private readonly metricFindQuery: CloudMonitoringMetricFindQuery;\n\n  constructor(private readonly datasource: CloudMonitoringDatasource) {\n    super();\n    this.metricFindQuery = new CloudMonitoringMetricFindQuery(datasource);\n  }\n\n  editor = CloudMonitoringVariableQueryEditor;\n\n  query(request: DataQueryRequest<CloudMonitoringVariableQuery>): Observable<DataQueryResponse> {\n    const executeObservable = from(this.metricFindQuery.execute(request.targets[0]));\n    return from(this.datasource.ensureGCEDefaultProject()).pipe(\n      mergeMap(() => executeObservable),\n      map((data) => ({ data }))\n    );\n  }\n}\n","import { chunk, flatten, isString, isArray, has, get, omit } from 'lodash';\nimport { from, lastValueFrom, Observable, of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\n\nimport {\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  QueryVariableModel,\n  ScopedVars,\n  SelectableValue,\n  TimeRange,\n  getDefaultTimeRange,\n} from '@grafana/data';\nimport {\n  DataSourceWithBackend,\n  getBackendSrv,\n  toDataQueryResponse,\n  BackendSrv,\n  getTemplateSrv,\n  TemplateSrv,\n} from '@grafana/runtime';\n\nimport { CloudMonitoringAnnotationSupport } from './annotationSupport';\nimport { SLO_BURN_RATE_SELECTOR_NAME } from './constants';\nimport { getMetricType, setMetricType } from './functions';\nimport { CloudMonitoringQuery, QueryType, MetricQuery, Filter } from './types/query';\nimport { CloudMonitoringOptions, MetricDescriptor, PostResponse, Aggregation } from './types/types';\nimport { CloudMonitoringVariableSupport } from './variables';\n\nexport default class CloudMonitoringDatasource extends DataSourceWithBackend<\n  CloudMonitoringQuery,\n  CloudMonitoringOptions\n> {\n  authenticationType: string;\n  intervalMs: number;\n  backendSrv: BackendSrv;\n\n  constructor(\n    private instanceSettings: DataSourceInstanceSettings<CloudMonitoringOptions>,\n    public templateSrv: TemplateSrv = getTemplateSrv()\n  ) {\n    super(instanceSettings);\n    this.authenticationType = instanceSettings.jsonData.authenticationType || 'jwt';\n    this.variables = new CloudMonitoringVariableSupport(this);\n    this.intervalMs = 0;\n    this.annotations = CloudMonitoringAnnotationSupport(this);\n    this.backendSrv = getBackendSrv();\n  }\n\n  getVariables() {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n\n  query(request: DataQueryRequest<CloudMonitoringQuery>): Observable<DataQueryResponse> {\n    request.targets = request.targets.map((t) => ({\n      ...this.migrateQuery(t),\n      intervalMs: request.intervalMs,\n    }));\n    return super.query(request);\n  }\n\n  applyTemplateVariables(target: CloudMonitoringQuery, scopedVars: ScopedVars) {\n    const { timeSeriesList, timeSeriesQuery, sloQuery, promQLQuery } = target;\n\n    return {\n      ...target,\n      datasource: this.getRef(),\n      intervalMs: this.intervalMs,\n      timeSeriesList: timeSeriesList && {\n        ...this.interpolateProps(timeSeriesList, scopedVars),\n        projectName: this.templateSrv.replace(\n          timeSeriesList.projectName ? timeSeriesList.projectName : this.getDefaultProject(),\n          scopedVars\n        ),\n        filters: this.interpolateFilters(timeSeriesList.filters || [], scopedVars),\n        groupBys: this.interpolateGroupBys(timeSeriesList.groupBys || [], scopedVars),\n        view: timeSeriesList.view || 'FULL',\n      },\n      timeSeriesQuery: timeSeriesQuery && {\n        ...this.interpolateProps(timeSeriesQuery, scopedVars),\n        projectName: this.templateSrv.replace(\n          timeSeriesQuery.projectName ? timeSeriesQuery.projectName : this.getDefaultProject(),\n          scopedVars\n        ),\n      },\n      sloQuery: sloQuery && this.interpolateProps(sloQuery, scopedVars),\n      promQLQuery: promQLQuery && this.interpolateProps(promQLQuery, scopedVars, { expr: this.interpolatePromQLQuery }),\n    };\n  }\n\n  async getLabels(\n    metricType: string,\n    refId: string,\n    projectName: string,\n    aggregation?: Aggregation,\n    timeRange?: TimeRange\n  ): Promise<{ [k: string]: string[] }> {\n    const options = {\n      targets: [\n        {\n          refId,\n          datasource: this.getRef(),\n          queryType: QueryType.TIME_SERIES_LIST,\n          timeSeriesList: setMetricType(\n            {\n              projectName: this.templateSrv.replace(projectName),\n              groupBys: this.interpolateGroupBys(aggregation?.groupBys || [], {}),\n              crossSeriesReducer: aggregation?.crossSeriesReducer ?? 'REDUCE_NONE',\n              view: 'HEADERS',\n            },\n            this.templateSrv.replace(metricType)\n          ),\n        },\n      ],\n      range: timeRange || getDefaultTimeRange(),\n    };\n\n    const queries = options.targets;\n\n    if (!queries.length) {\n      return lastValueFrom(of({ results: [] }));\n    }\n\n    return lastValueFrom(\n      from(this.ensureGCEDefaultProject()).pipe(\n        mergeMap(() => {\n          return this.backendSrv.fetch<PostResponse>({\n            url: '/api/ds/query',\n            method: 'POST',\n            headers: this.getRequestHeaders(),\n            data: {\n              from: options.range.from.valueOf().toString(),\n              to: options.range.to.valueOf().toString(),\n              queries,\n            },\n          });\n        }),\n\n        map(({ data }) => {\n          const dataQueryResponse = toDataQueryResponse({\n            data: data,\n          });\n\n          const labels: Record<string, Set<string>> = dataQueryResponse?.data\n            .map((f) => f.meta?.custom?.labels)\n            .filter((p) => !!p)\n            .reduce((acc, labels) => {\n              for (let key in labels) {\n                if (!acc[key]) {\n                  acc[key] = new Set<string>();\n                }\n                if (labels[key]) {\n                  acc[key].add(labels[key]);\n                }\n              }\n              return acc;\n            }, {});\n\n          return Object.fromEntries(\n            Object.entries(labels).map(([key, value]) => {\n              const fromArr = Array.from(value);\n              return [key, fromArr];\n            })\n          );\n        })\n      )\n    );\n  }\n\n  async getGCEDefaultProject() {\n    return this.getResource(`gceDefaultProject`);\n  }\n\n  getDefaultProject(): string {\n    const { defaultProject, authenticationType, gceDefaultProject } = this.instanceSettings.jsonData;\n    if (authenticationType === 'gce') {\n      return gceDefaultProject || '';\n    }\n\n    return defaultProject || '';\n  }\n\n  async ensureGCEDefaultProject() {\n    const { authenticationType, gceDefaultProject } = this.instanceSettings.jsonData;\n    if (authenticationType === 'gce' && !gceDefaultProject) {\n      this.instanceSettings.jsonData.gceDefaultProject = await this.getGCEDefaultProject();\n    }\n  }\n\n  async getMetricTypes(projectName: string): Promise<MetricDescriptor[]> {\n    if (!projectName) {\n      return [];\n    }\n\n    return this.getResource(`metricDescriptors/v3/projects/${this.templateSrv.replace(projectName)}/metricDescriptors`);\n  }\n\n  async filterMetricsByType(projectName: string, filter: string): Promise<MetricDescriptor[]> {\n    if (!projectName) {\n      return [];\n    }\n\n    return this.getResource(\n      `metricDescriptors/v3/projects/${this.templateSrv.replace(projectName)}/metricDescriptors`,\n      { filter: `metric.type : \"${filter}\"` }\n    );\n  }\n\n  async getSLOServices(projectName: string): Promise<Array<SelectableValue<string>>> {\n    return this.getResource(`services/v3/projects/${this.templateSrv.replace(projectName)}/services?pageSize=1000`);\n  }\n\n  async getServiceLevelObjectives(projectName: string, serviceId: string): Promise<Array<SelectableValue<string>>> {\n    if (!serviceId) {\n      return Promise.resolve([]);\n    }\n    let { projectName: p, serviceId: s } = this.interpolateProps({ projectName, serviceId });\n    return this.getResource(`slo-services/v3/projects/${p}/services/${s}/serviceLevelObjectives`);\n  }\n\n  getProjects(): Promise<Array<SelectableValue<string>>> {\n    return this.getResource(`projects`);\n  }\n\n  migrateMetricTypeFilter(metricType: string, filters?: string[]) {\n    const metricTypeFilterArray = ['metric.type', '=', metricType];\n    if (filters?.length) {\n      return filters.concat('AND', metricTypeFilterArray);\n    }\n    return metricTypeFilterArray;\n  }\n\n  // This is a manual port of the migration code in cloudmonitoring.go\n  // DO NOT UPDATE THIS CODE WITHOUT UPDATING THE BACKEND CODE\n  migrateQuery(query: CloudMonitoringQuery): CloudMonitoringQuery {\n    const { hide, refId, datasource, key, queryType, maxLines, metric, intervalMs, type, ...rest } = query as any;\n    if (\n      !query.hasOwnProperty('metricQuery') &&\n      !query.hasOwnProperty('sloQuery') &&\n      !query.hasOwnProperty('timeSeriesQuery') &&\n      !query.hasOwnProperty('timeSeriesList')\n    ) {\n      let filters = rest.filters || [];\n      if (rest.metricType) {\n        filters = this.migrateMetricTypeFilter(rest.metricType, filters);\n      }\n\n      return {\n        datasource,\n        key,\n        refId,\n        intervalMs,\n        hide,\n        queryType: type === 'annotationQuery' ? QueryType.ANNOTATION : QueryType.TIME_SERIES_LIST,\n        timeSeriesList: {\n          ...rest,\n          projectName: get(query, 'projectName') || this.getDefaultProject(),\n          filters,\n          view: rest.view || 'FULL',\n        },\n      };\n    }\n\n    if (has(query, 'metricQuery') && ['metrics', QueryType.ANNOTATION].includes(query.queryType ?? '')) {\n      const metricQuery = get(query, 'metricQuery') as MetricQuery;\n      if (metricQuery.editorMode === 'mql') {\n        query.timeSeriesQuery = {\n          projectName: metricQuery.projectName,\n          query: metricQuery.query,\n          graphPeriod: metricQuery.graphPeriod,\n        };\n        query.queryType = QueryType.TIME_SERIES_QUERY;\n      } else {\n        query.timeSeriesList = {\n          projectName: metricQuery.projectName || this.getDefaultProject(),\n          crossSeriesReducer: metricQuery.crossSeriesReducer,\n          alignmentPeriod: metricQuery.alignmentPeriod,\n          perSeriesAligner: metricQuery.perSeriesAligner,\n          groupBys: metricQuery.groupBys,\n          filters: metricQuery.filters,\n          view: metricQuery.view,\n          preprocessor: metricQuery.preprocessor,\n        };\n        query.queryType = QueryType.TIME_SERIES_LIST;\n        if (metricQuery.metricType) {\n          query.timeSeriesList.filters = this.migrateMetricTypeFilter(\n            metricQuery.metricType,\n            query.timeSeriesList.filters\n          );\n        }\n      }\n      query.aliasBy = metricQuery.aliasBy;\n      query = omit(query, 'metricQuery');\n    }\n\n    if (query.queryType === QueryType.SLO && has(query, 'sloQuery.aliasBy')) {\n      const sloQuery = get(query, 'sloQuery.aliasBy');\n      if (typeof sloQuery === 'string') {\n        query.aliasBy = sloQuery;\n      }\n      query = omit(query, 'sloQuery.aliasBy');\n    }\n\n    return query;\n  }\n\n  interpolatePromQLQuery(value: string | string[], _variable: QueryVariableModel) {\n    if (isArray(value)) {\n      return value.join('|');\n    }\n    return value;\n  }\n\n  interpolateProps<T extends Record<string, any>>(\n    object: T,\n    scopedVars: ScopedVars = {},\n    formattingFunctions?: { [key: string]: Function | undefined }\n  ): T {\n    return Object.entries(object).reduce((acc, [key, value]) => {\n      let interpolatedValue = value;\n      if (value && isString(value)) {\n        // Pass a function to the template service for formatting\n        interpolatedValue = this.templateSrv.replace(\n          value,\n          scopedVars,\n          formattingFunctions && formattingFunctions[key]\n        );\n      }\n      return {\n        ...acc,\n        [key]: interpolatedValue,\n      };\n    }, {} as T);\n  }\n\n  filterQuery(item: CloudMonitoringQuery): boolean {\n    if (item.hide) {\n      return false;\n    }\n\n    const query = this.migrateQuery(item);\n\n    if (query.queryType === QueryType.SLO) {\n      if (!query.sloQuery) {\n        return false;\n      }\n      const { selectorName, serviceId, sloId, projectName, lookbackPeriod } = query.sloQuery;\n      return (\n        !!selectorName &&\n        !!serviceId &&\n        !!sloId &&\n        !!projectName &&\n        (selectorName !== SLO_BURN_RATE_SELECTOR_NAME || !!lookbackPeriod)\n      );\n    }\n\n    if (query.queryType === QueryType.TIME_SERIES_QUERY) {\n      return !!query.timeSeriesQuery && !!query.timeSeriesQuery.projectName && !!query.timeSeriesQuery.query;\n    }\n\n    if (query.queryType && [QueryType.TIME_SERIES_LIST, QueryType.ANNOTATION].includes(query.queryType)) {\n      return !!query.timeSeriesList && !!query.timeSeriesList.projectName && !!getMetricType(query.timeSeriesList);\n    }\n\n    if (query.queryType === QueryType.PROMQL) {\n      return (\n        !!query.promQLQuery && !!query.promQLQuery.projectName && !!query.promQLQuery.expr && !!query.promQLQuery.step\n      );\n    }\n\n    return false;\n  }\n\n  interpolateVariablesInQueries(queries: CloudMonitoringQuery[], scopedVars: ScopedVars): CloudMonitoringQuery[] {\n    return queries.map((query) => this.applyTemplateVariables(this.migrateQuery(query), scopedVars));\n  }\n\n  interpolateFilters(filters: string[], scopedVars: ScopedVars) {\n    const completeFilter: Filter[] = chunk(filters, 4)\n      .map(([key, operator, value, condition]) => ({\n        key,\n        operator,\n        value,\n        ...(condition && { condition }),\n      }))\n      .filter((item) => item.value);\n\n    const filterArray = flatten(\n      completeFilter.map(({ key, operator, value, condition }: Filter) => [\n        this.templateSrv.replace(key, scopedVars || {}),\n        operator,\n        this.templateSrv.replace(value, scopedVars || {}, (value: string | string[]) => {\n          return isArray(value) && value.length ? `(${value.join('|')})` : value;\n        }),\n        ...(condition ? [condition] : []),\n      ])\n    );\n\n    return filterArray || [];\n  }\n\n  interpolateGroupBys(groupBys: string[], scopedVars: {}): string[] {\n    let interpolatedGroupBys: string[] = [];\n    (groupBys || []).forEach((gb) => {\n      const interpolated = this.templateSrv.replace(gb, scopedVars || {}, 'csv').split(',');\n      if (Array.isArray(interpolated)) {\n        interpolatedGroupBys = interpolatedGroupBys.concat(interpolated);\n      } else {\n        interpolatedGroupBys.push(interpolated);\n      }\n    });\n    return interpolatedGroupBys;\n  }\n}\n","import { get } from 'lodash';\n\nimport { DataSourcePlugin, DashboardLoadedEvent } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\n\nimport CloudMonitoringCheatSheet from './components/CloudMonitoringCheatSheet';\nimport { ConfigEditor } from './components/ConfigEditor/ConfigEditor';\nimport { QueryEditor } from './components/QueryEditor';\nimport { CloudMonitoringVariableQueryEditor } from './components/VariableQueryEditor';\nimport CloudMonitoringDatasource from './datasource';\nimport pluginJson from './plugin.json';\nimport { trackCloudMonitoringDashboardLoaded } from './tracking';\nimport { CloudMonitoringQuery, QueryType } from './types/query';\n\nexport const plugin = new DataSourcePlugin<CloudMonitoringDatasource, CloudMonitoringQuery>(CloudMonitoringDatasource)\n  .setQueryEditorHelp(CloudMonitoringCheatSheet)\n  .setQueryEditor(QueryEditor)\n  .setConfigEditor(ConfigEditor)\n  .setVariableQueryEditor(CloudMonitoringVariableQueryEditor);\n\n// Track dashboard loads to RudderStack\ngetAppEvents().subscribe<DashboardLoadedEvent<CloudMonitoringQuery>>(\n  DashboardLoadedEvent,\n  ({ payload: { dashboardId, orgId, grafanaVersion, queries } }) => {\n    const cloudmonitorQueries = queries[pluginJson.id];\n    let stats = {\n      [QueryType.TIME_SERIES_QUERY]: 0,\n      [QueryType.TIME_SERIES_LIST]: 0,\n      [QueryType.SLO]: 0,\n      [QueryType.ANNOTATION]: 0,\n      [QueryType.PROMQL]: 0,\n    };\n    cloudmonitorQueries.forEach((query) => {\n      if (\n        query.queryType === QueryType.TIME_SERIES_QUERY ||\n        query.queryType === QueryType.TIME_SERIES_LIST ||\n        query.queryType === QueryType.SLO ||\n        query.queryType === QueryType.ANNOTATION ||\n        query.queryType === QueryType.PROMQL\n      ) {\n        stats[query.queryType]++;\n      } else if (query.queryType === 'metrics') {\n        if (query.hasOwnProperty('type') && get(query, 'type') === 'annotationQuery') {\n          stats.annotation++;\n        }\n        if (get(query, 'metricQuery.editorMode') === 'mql') {\n          stats.timeSeriesQuery++;\n        } else {\n          stats.timeSeriesList++;\n        }\n      }\n    });\n\n    if (cloudmonitorQueries && cloudmonitorQueries.length > 0) {\n      trackCloudMonitoringDashboardLoaded({\n        grafana_version: grafanaVersion,\n        dashboard_id: dashboardId,\n        org_id: orgId,\n        mql_queries: stats[QueryType.TIME_SERIES_QUERY],\n        time_series_filter_queries: stats[QueryType.TIME_SERIES_LIST],\n        slo_queries: stats[QueryType.SLO],\n        annotation_queries: stats[QueryType.ANNOTATION],\n        promQL_queries: stats[QueryType.PROMQL],\n      });\n    }\n  }\n);\n","import deepEqual from 'fast-deep-equal';\nimport { isEqual } from 'lodash';\nimport React, { useEffect, useState } from 'react';\n\nimport { QueryEditorProps, getDefaultTimeRange, toOption } from '@grafana/data';\nimport { EditorRows } from '@grafana/experimental';\nimport { ConfirmModal } from '@grafana/ui';\n\nimport CloudMonitoringDatasource from '../datasource';\nimport { selectors } from '../e2e/selectors';\nimport { CloudMonitoringQuery, PromQLQuery, QueryType, SLOQuery } from '../types/query';\nimport { CloudMonitoringOptions } from '../types/types';\n\nimport { defaultTimeSeriesList, defaultTimeSeriesQuery } from './MetricQueryEditor';\nimport { PromQLQueryEditor } from './PromQLEditor';\nimport { QueryHeader } from './QueryHeader';\nimport { defaultQuery as defaultSLOQuery } from './SLOQueryEditor';\n\nimport { MetricQueryEditor, SLOQueryEditor } from './';\n\nexport type Props = QueryEditorProps<CloudMonitoringDatasource, CloudMonitoringQuery, CloudMonitoringOptions>;\n\nexport const QueryEditor = (props: Props) => {\n  const { datasource, query, onRunQuery, onChange, range } = props;\n  const [modalIsOpen, setModalIsOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    const migrated = datasource.migrateQuery(query);\n    if (!deepEqual(migrated, query)) {\n      onChange({ ...migrated });\n    }\n  }, [query, datasource, onChange]);\n\n  const [currentQuery, setCurrentQuery] = useState<CloudMonitoringQuery>(query);\n  const [queryHasBeenEdited, setQueryHasBeenEdited] = useState<boolean>(false);\n\n  const sloQuery = { ...defaultSLOQuery(datasource), ...query.sloQuery };\n  const onSLOQueryChange = (q: SLOQuery) => {\n    onChange({ ...query, sloQuery: q });\n    onRunQuery();\n  };\n\n  const promQLQuery = {\n    ...{ projectName: datasource.getDefaultProject(), expr: '', step: '10s' },\n    ...query.promQLQuery,\n  };\n  const onPromQLQueryChange = (q: PromQLQuery) => {\n    onChange({ ...query, promQLQuery: q });\n  };\n\n  const onMetricQueryChange = (q: CloudMonitoringQuery) => {\n    if (\n      (q.queryType === QueryType.TIME_SERIES_LIST && !isEqual(q.timeSeriesList, defaultTimeSeriesList(datasource))) ||\n      (q.queryType === QueryType.TIME_SERIES_QUERY && !isEqual(q.timeSeriesQuery, defaultTimeSeriesQuery(datasource)))\n    ) {\n      setQueryHasBeenEdited(true);\n    }\n    onChange(q);\n  };\n\n  const meta = props.data?.series.length ? props.data?.series[0].meta : {};\n  const customMetaData = meta?.custom ?? {};\n  const variableOptionGroup = {\n    label: 'Template Variables',\n    expanded: false,\n    options: datasource.getVariables().map(toOption),\n  };\n\n  // Use a known query type\n  useEffect(() => {\n    if (!query.queryType || !Object.values(QueryType).includes(query.queryType)) {\n      onChange({ ...query, queryType: QueryType.TIME_SERIES_LIST });\n    }\n  });\n  const queryType = query.queryType;\n\n  const checkForModalDisplay = (q: CloudMonitoringQuery) => {\n    if (\n      queryHasBeenEdited &&\n      (currentQuery.queryType === QueryType.TIME_SERIES_LIST || currentQuery.queryType === QueryType.TIME_SERIES_QUERY)\n    ) {\n      if (currentQuery.queryType !== q.queryType) {\n        setModalIsOpen(true);\n      }\n    } else {\n      onChange(q);\n    }\n    setCurrentQuery(q);\n  };\n\n  return (\n    <span data-testid={selectors.components.queryEditor.container}>\n      <EditorRows>\n        <ConfirmModal\n          data-testid=\"switch-query-type-modal\"\n          title=\"Warning\"\n          body=\"By switching your query type, your current query will be lost.\"\n          isOpen={modalIsOpen}\n          onConfirm={() => {\n            setModalIsOpen(false);\n            onChange(currentQuery);\n            setQueryHasBeenEdited(false);\n          }}\n          confirmText=\"Confirm\"\n          onDismiss={() => {\n            setModalIsOpen(false);\n            setCurrentQuery(query);\n          }}\n        />\n        <QueryHeader query={query} onChange={checkForModalDisplay} onRunQuery={onRunQuery} />\n\n        {queryType === QueryType.PROMQL && (\n          <PromQLQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            onChange={onPromQLQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={promQLQuery}\n          />\n        )}\n\n        {queryType !== QueryType.SLO && (\n          <MetricQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onMetricQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={query}\n            range={range || getDefaultTimeRange()}\n          />\n        )}\n\n        {queryType === QueryType.SLO && (\n          <SLOQueryEditor\n            refId={query.refId}\n            variableOptionGroup={variableOptionGroup}\n            customMetaData={customMetaData}\n            onChange={onSLOQueryChange}\n            onRunQuery={onRunQuery}\n            datasource={datasource}\n            query={sloQuery}\n            aliasBy={query.aliasBy}\n            onChangeAliasBy={(aliasBy: string) => onChange({ ...query, aliasBy })}\n          />\n        )}\n      </EditorRows>\n    </span>\n  );\n};\n","import { reportInteraction } from '@grafana/runtime';\n\n/**\n * Loaded the first time a dashboard containing Cloudmonitoring queries is loaded (not on every render)\n * Note: The queries used here are the ones pre-migration and pre-filterQuery\n */\nexport const trackCloudMonitoringDashboardLoaded = (props: CloudMonitoringDashboardLoadedProps) => {\n  reportInteraction('grafana_ds_cloudmonitoring_dashboard_loaded', props);\n};\n\nexport type CloudMonitoringDashboardLoadedProps = {\n  grafana_version?: string;\n  dashboard_id: string;\n  org_id?: number;\n  /** number of non hidden queries of type TimeSeriesQuery (MQL) if any  */\n  mql_queries: number;\n  /** number of non hidden queries of type TimeSeriesFilter (Builder) if any  */\n  time_series_filter_queries: number;\n  /** number of non hidden queries of type SLO if any  */\n  slo_queries: number;\n  /** number of non hidden queries of type annotation if any  */\n  annotation_queries: number;\n  /** number of non hidden queries of type PromQL if any  */\n  promQL_queries: number;\n};\n"],"names":["e","t","a","n","o","default","l","i","c","d","v","b","onChange","showConfigEditor","showPaste","showUpload","isPasting","r","isUploading","p","f","m","useState","g","useTheme2","h","useCallback","E","T","trim","JSON","parse","j","isValid","privateKey","private_key","tokenUri","token_uri","clientEmail","client_email","projectId","project_id","error","createElement","Fragment","Field","label","invalid","Boolean","description","FileDropzone","options","multiple","accept","readAs","onLoad","style","margin","fontSize","typography","h4","textAlign","Button","fill","TextArea","autoFocus","placeholder","onBlur","currentTarget","value","rows","type","color","colors","primary","text","onClick","paddingRight","paddingLeft","isObject","filter","length","join","SecretFormField","k","LegacyForms","J","PATH","JWT","P","onReset","onOptionsChange","s","u","privateKeyPath","jsonData","onUpdateDatasourceJsonDataOption","y","className","isConfigured","secureJsonFields","secureJsonData","onUpdateDatasourceSecureJsonDataOption","Input","id","width","defaultProject","SecretInput","Object","assign","labelWidth","inputWidth","C","authOptions","authenticationType","O","FieldSet","RadioButtonGroup","W","ariaLabel","exports","ConnectionConfig","marginTop","target","rel","href","Alert","title","severity","module","fn","wait","arguments","undefined","lastCallAt","deferred","timer","pendingArgs","currentWait","getWait","currentTime","Date","getTime","isCold","_len","args","Array","_key","leading","accumulate","Promise","resolve","call","this","then","result","apply","concat","clearTimeout","promise","reject","defer","push","setTimeout","flush","bind","argsIndex","results","thisDeferred","equal","constructor","keys","isArray","RegExp","source","flags","valueOf","prototype","toString","hasOwnProperty","key","__WEBPACK_EXTERNAL_MODULE__89__","__WEBPACK_EXTERNAL_MODULE__781__","__WEBPACK_EXTERNAL_MODULE__531__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__241__","__WEBPACK_EXTERNAL_MODULE__959__","__WEBPACK_EXTERNAL_MODULE__269__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","get","obj","prop","Symbol","toStringTag","CloudMonitoringCheatSheet","PureComponent","render","div","h2","code","br","span","ul","css","li","__defProp","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","configurable","writable","__spreadValues","DataSourceDescription","dataSourceName","docsLink","hasRequiredFields","theme","styles","container","spacing","body","secondary","link","textDecoration","cx","GenericConfigSection","children","isCollapsible","isInitiallyOpen","kind","isOpen","setIsOpen","iconName","isSubSection","collapsibleButtonAriaLabel","header","display","justifyContent","alignItems","subtitle","fontWeight","fontWeightRegular","descriptionText","marginBottom","bodySmall","content","IconButton","name","size","ConfigSection","_a","_b","props","exclude","indexOf","__objRest","ConfigEditor","Divider","handleOnOptionsChange","config","secureSocksDSProxyEnabled","enableSecureSocksProxy","SecureSocksProxySettings","reportInteraction","Stack","useStyles2","getStyles","root","_c","flexDirection","direction","flexWrap","wrap","gap","flexGrow","EditorRows","selectors","components","queryEditor","select","visualMetricsQueryEditor","input","mqlMetricsQueryEditor","sloQueryEditor","promQlQueryEditor","QueryType","PreprocessorType","MetricKind","ValueTypes","AlignmentTypes","MetricFindQueryTypes","Space","layout","wrapper","paddingBottom","EditorField","optional","tooltip","tooltipInteractive","fieldProps","childInputId","htmlFor","ReactUtils","getChildId","labelEl","Tooltip","placement","interactive","Icon","tabIndex","icon","field","minWidth","fontWeightMedium","fontStyle","marginLeft","AliasBy","refId","alias","setAlias","propagateOnChange","debounce","EditorRow","padding","backgroundColor","background","borderRadius","shape","ALIGNMENTS","valueTypes","INT64","DOUBLE","MONEY","DISTRIBUTION","STRING","VALUE_TYPE_UNSPECIFIED","BOOL","metricKinds","GAUGE","CUMULATIVE","DELTA","AGGREGATIONS","METRIC_KIND_UNSPECIFIED","ALIGNMENT_PERIODS","hidden","GRAPH_PERIODS","LOOKBACK_PERIODS","SYSTEM_LABELS","SLO_BURN_RATE_SELECTOR_NAME","SELECTORS","QUERY_TYPES","TIME_SERIES_LIST","TIME_SERIES_QUERY","SLO","PROMQL","Project","projectName","datasource","templateVariableOptions","projects","setProjects","useEffect","getProjects","projectsWithTemplateVariables","useMemo","Select","allowCustomValue","formatCreateLabel","inputId","EditorFieldGroup","extractServicesFromMetricDescriptors","metricDescriptors","uniqBy","getMetricTypesByService","service","getMetricTypes","metricType","interpolatedMetricType","selectedService","metricTypes","map","displayName","metricTypeExistInArray","some","metricTypeByService","selectedMetricType","getAlignmentOptionsByMetric","metricValueType","metricKind","preprocessor","Rate","getAggregationOptionsByMetric","valueType","getLabelKeys","labels","getLabels","getAlignmentPickerData","perSeriesAligner","ALIGN_MEAN","templateSrv","getTemplateSrv","alignOptions","option","replace","labelsToGroupedOptions","groupBys","groups","reduce","acc","curr","arr","split","startCase","group","initial","entries","expanded","alignmentPeriodLabel","customMetaData","alignmentPeriod","alignment","find","ap","seconds","parseInt","rangeUtil","secondsToHms","getMetricType","query","metricTypeKey","filters","findIndex","setMetricType","Aggregation","aggOptions","useAggregationOptionsByMetric","selected","useSelectedFromOptions","data-testid","menuPlacement","metricDescriptor","crossSeriesReducer","GroupBy","variableOptionGroup","MultiSelect","AlignmentFunction","psa","PeriodSelect","current","disabled","aligmentPeriods","visibleOptions","Alignment","alignmentLabel","q","period","AccessoryButton","getButtonStyles","button","EditorList","items","renderItem","ref","item","index","newItem","itemIndex","newItems","onChangeItem","splice","onDeleteItem","variant","DEFAULT_OPERATOR","DEFAULT_CONDITION","operators","toOption","protectedFilterKeys","LabelFilter","filterArray","_onChange","rawFilters","chunk","operator","condition","stringArrayToFilters","includes","protectedFilters","getOptions","op","opp","valueOptions","HorizontalGroup","aria-label","flatMap","slice","filtersToStringArray","AnnotationsHelp","h5","LookbackPeriodSelect","lp","slos","setSLOs","serviceId","getServiceLevelObjectives","sloIds","sloId","sloName","slo","goal","Selector","selectorName","Service","services","setServices","getSLOServices","serviceName","SLOQueryEditor","aliasBy","onChangeAliasBy","lookbackPeriod","MQLQueryEditor","onRunQuery","onKeyDown","event","shiftKey","ctrlKey","preventDefault","VariableQueryField","NONE_OPTION","None","Preprocessor","useOptions","Delta","Editor","range","setLabels","setMetricDescriptors","setMetricDescriptor","metrics","setMetrics","setService","timeRange","setTimeRange","time","raw","from","to","selectStyles","getSelectStyles","customStyle","getSelectedMetricDescriptor","md","loadMetricDescriptors","count","getServicesList","optionDescription","selectedMetricDescriptor","component","getMetricsList","serviceShortName","filterMetrics","filtered","filterMetricsByType","toLowerCase","debounceFilter","onMetricTypeChange","defaultTimeSeriesList","isLoading","AsyncSelect","loadOptions","defaultOptions","VisualMetricQueryEditor","React","GraphPeriod","graphPeriod","Switch","checked","dataSource","getDefaultProject","defaultTimeSeriesQuery","onQueryChange","onChangeTimeSeriesList","timeSeriesList","filtersComplete","onChangeTimeSeriesQuery","timeSeriesQuery","queryType","ANNOTATION","MetricQueryEditor","PromQLQueryEditor","onReturnKeyDown","stopPropagation","expr","step","EditorHeader","minHeight","InlineSelect","labelProp","Math","random","SelectContainer","ValueContainer","SingleValue","openMenuOnFocus","valueContainer","whiteSpace","borderColor","flex","FlexItem","grow","shrink","flexShrink","QueryHeader","CloudMonitoringVariableQueryEditor","componentDidMount","ensureGCEDefaultProject","state","sloServices","loading","setState","onPropsChange","onQueryTypeChange","selectedQueryType","onProjectChange","onServiceChange","onLabelKeyChange","labelKey","componentDidUpdate","prevProps","prevState","selecQueryTypeChanged","selectSLOServiceChanged","selectedSLOService","LabelValues","renderQueryTypeSwitch","getVariables","MetricTypes","LabelKeys","ResourceTypes","Aligners","Aggregations","Services","SLOServices","queryTypes","super","Projects","AlignmentPeriods","Selectors","defaults","queryModel","isFunction","operate","init","lift","hasLift","liftedSource","err","TypeError","extendStatics","setPrototypeOf","__proto__","__extends","String","__","create","__generator","thisArg","_","sent","trys","ops","next","verb","iterator","done","pop","__values","__read","ar","__spreadArray","pack","__await","SuppressedError","ctorFunc","UnsubscriptionError","errors","instance","Error","stack","message","arrRemove","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","e_2","_parentage_1","_parentage_1_1","remove","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","add","teardown","_hasParent","_addParent","parent","_removeParent","EMPTY","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","handler","timeout","_i","delegate","handle","reportUnhandledError","noop","COMPLETE_NOTIFICATION","createNotification","context","Subscriber","_super","destination","_this","isStopped","EMPTY_OBSERVER","complete","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","Function","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","errorThrown","notification","subscriber","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","project","subscribe","isArrayLike","x","observable","identity","Observable","_subscribe","isObserver","cb","isRoot","errorContext","_trySubscribe","sink","forEach","promiseCtor","getPromiseCtor","pipe","operations","fns","prev","toPromise","innerFrom","isInteropObservable","obs","array","asyncIterator","isAsyncIterable","fromAsyncIterable","isIterable","iterable","iterable_1","iterable_1_1","getReader","isReadableStreamLike","readableStream","_arguments","generator","resume","fulfill","settle","shift","__asyncGenerator","reader","read","releaseLock","readableStreamLikeToAsyncGenerator","createInvalidObservableTypeError","asyncIterable","asyncIterable_1","asyncIterable_1_1","__asyncValues","fulfilled","rejected","process","catch","mergeMap","resultSelector","concurrent","Infinity","ii","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","buffer","active","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","_loop_1","bufferedValue","mergeInternals","useDebounce","ms","deps","ready","useRef","callback","isReady","set","clear","useTimeoutFn","cancel","reset","AnnotationQueryEditor","data","meta","series","custom","defaultQuery","setTitle","setText","values","getDefaultTimeRange","CloudMonitoringAnnotationSupport","ds","prepareAnnotation","isLegacyCloudMonitoringAnnotation","enable","iconColor","intervalMs","ALIGN_NONE","prepareQuery","anno","QueryEditor","CloudMonitoringMetricFindQuery","execute","handleProjectsQuery","handleServiceQuery","handleMetricTypesQuery","handleLabelKeysQuery","handleLabelValuesQuery","handleResourceTypeQuery","handleAlignersQuery","handleAlignmentPeriodQuery","handleAggregationQuery","handleSLOServicesQuery","handleSLOQuery","handleSelectorQuery","console","expandable","toFindQueryResult","interpolatedKey","descriptor","isString","CloudMonitoringVariableSupport","CustomVariableSupport","request","executeObservable","metricFindQuery","targets","editor","CloudMonitoringDatasource","DataSourceWithBackend","migrateQuery","applyTemplateVariables","scopedVars","sloQuery","promQLQuery","getRef","interpolateProps","interpolateFilters","interpolateGroupBys","view","interpolatePromQLQuery","aggregation","queries","lastValueFrom","backendSrv","fetch","url","method","headers","getRequestHeaders","dataQueryResponse","toDataQueryResponse","Set","fromEntries","of","getGCEDefaultProject","getResource","gceDefaultProject","instanceSettings","migrateMetricTypeFilter","metricTypeFilterArray","hide","maxLines","metric","rest","has","metricQuery","editorMode","omit","_variable","object","formattingFunctions","interpolatedValue","filterQuery","interpolateVariablesInQueries","completeFilter","flatten","interpolatedGroupBys","gb","interpolated","variables","annotations","getBackendSrv","plugin","DataSourcePlugin","setQueryEditorHelp","setQueryEditor","modalIsOpen","setModalIsOpen","migrated","deepEqual","currentQuery","setCurrentQuery","queryHasBeenEdited","setQueryHasBeenEdited","ConfirmModal","onConfirm","confirmText","onDismiss","isEqual","setConfigEditor","setVariableQueryEditor","getAppEvents","DashboardLoadedEvent","payload","dashboardId","orgId","grafanaVersion","cloudmonitorQueries","stats","annotation","grafana_version","dashboard_id","org_id","mql_queries","time_series_filter_queries","slo_queries","annotation_queries","promQL_queries"],"sourceRoot":""}