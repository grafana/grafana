"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getJavaScriptContent = exports.getMarkdownContent = exports.buildMarkdownContent = exports.completeTemplate = exports.templateMetaContent = exports.readMeContent = void 0;
var fs_1 = require("fs");
var path_1 = require("path");
var content_1 = require("../../public/app/features/transformers/docs/content");
var WRITE_PATH = 'docs/sources/panels-visualizations/query-transform-data/transform-data/index.md';
exports.readMeContent = "\n  To update this Markdown, navigate to the following Typescript files and edit them based on what you need to update:\n\n  scripts/docs/generate-transformations.ts - Includes all content not specific to a transformation.\n  public/app/features/transformers/docs/content.ts - Transformation-specific content.\n\n  Only use reference style links in the 'content.ts' file or else link text will be visible in the UI.\n\n  To build this Markdown, do the following:\n\n  $ cd /docs (from the root of the repository)\n  $ make sources/panels-visualizations/query-transform-data/transform-data/index.md\n  $ make docs\n\n  Browse to http://localhost:3003/docs/grafana/latest/panels-visualizations/query-transform-data/transform-data/\n\n  Refer to ./docs/README.md \"Content guidelines\" for more information about editing and building these docs.\n";
exports.templateMetaContent = "---\ncomments: |\n  This Markdown file is auto-generated. DO NOT EDIT THIS FILE DIRECTLY.\n".concat(exports.readMeContent, "\n\naliases:\n  - ../../panels/reference-transformation-functions/\n  - ../../panels/transform-data/\n  - ../../panels/transform-data/about-transformation/\n  - ../../panels/transform-data/add-transformation-to-data/\n  - ../../panels/transform-data/apply-transformation-to-data/\n  - ../../panels/transform-data/debug-transformation/\n  - ../../panels/transform-data/delete-transformation/\n  - ../../panels/transform-data/transformation-functions/\n  - ../../panels/transformations/\n  - ../../panels/transformations/apply-transformations/\n  - ../../panels/transformations/config-from-query/\n  - ../../panels/transformations/rows-to-fields/\n  - ../../panels/transformations/types-options/\nlabels:\n  products:\n    - cloud\n    - enterprise\n    - oss\ntitle: Transform data\ndescription: Use transformations to rename fields, join time series/SQL-like data, apply mathematical operations, and more\nweight: 100\n---");
var templateIntroContent = "# Transform data\n\nTransformations are a powerful way to manipulate data returned by a query before the system applies a visualization. Using transformations, you can:\n\n- Rename fields\n- Join time series/SQL-like data\n- Perform mathematical operations across queries\n- Use the output of one transformation as the input to another transformation\n\nFor users that rely on multiple views of the same dataset, transformations offer an efficient method of creating and maintaining numerous dashboards.\n\nYou can also use the output of one transformation as the input to another transformation, which results in a performance gain.\n\n> Sometimes the system cannot graph transformed data. When that happens, click the `Table view` toggle above the visualization to switch to a table view of the data. This can help you understand the final result of your transformations.\n\n## Transformation types\n\nGrafana provides a number of ways that you can transform data. For a complete list of transformations, refer to [Transformation functions](#transformation-functions).\n\n## Order of transformations\n\nWhen there are multiple transformations, Grafana applies them in the order they are listed. Each transformation creates a result set that then passes on to the next transformation in the processing pipeline.\n\nThe order in which Grafana applies transformations directly impacts the results. For example, if you use a Reduce transformation to condense all the results of one column into a single value, then you can only apply transformations to that single value.\n\n## Add a transformation function to data\n\nThe following steps guide you in adding a transformation to data. This documentation does not include steps for each type of transformation. For a complete list of transformations, refer to [Transformation functions](#transformation-functions).\n\n1. Navigate to the panel where you want to add one or more transformations.\n1. Hover over any part of the panel to display the actions menu on the top right corner.\n1. Click the menu and select **Edit**.\n1. Click the **Transform** tab.\n1. Click a transformation.\n   A transformation row appears where you configure the transformation options. For more information about how to configure a transformation, refer to [Transformation functions](#transformation-functions).\n   For information about available calculations, refer to [Calculation types][].\n1. To apply another transformation, click **Add transformation**.\n   This transformation acts on the result set returned by the previous transformation.\n   {{< figure src=\"/static/img/docs/transformations/transformations-7-0.png\" class=\"docs-image--no-shadow\" max-width= \"1100px\" alt=\"Transform tab in the panel editor\" >}}\n\n## Debug a transformation\n\nTo see the input and the output result sets of the transformation, click the bug icon on the right side of the transformation row.\n\nThe input and output results sets can help you debug a transformation.\n\n{{< figure src=\"/static/img/docs/transformations/debug-transformations-7-0.png\" class=\"docs-image--no-shadow\" max-width= \"1100px\" alt=\"The debug transformation screen with the debug icon highlighted\" >}}\n\n## Disable a transformation\n\nYou can disable or hide one or more transformations by clicking on the eye icon on the top right side of the transformation row. This disables the applied actions of that specific transformation and can help to identify issues when you change several transformations one after another.\n\n{{< figure src=\"/static/img/docs/transformations/screenshot-example-disable-transformation.png\" class=\"docs-image--no-shadow\" max-width= \"1100px\" alt=\"A transformation row with the disable transformation icon highlighted\" >}}\n\n## Filter a transformation\n\nIf your panel uses more than one query, you can filter these and apply the selected transformation to only one of the queries. To do this, click the filter icon on the top right of the transformation row. This opens a drop-down with a list of queries used on the panel. From here, you can select the query you want to transform.\n\nYou can also filter by annotations (which includes exemplars) to apply transformations to them. When you do so, the list of fields changes to reflect those in the annotation or exemplar tooltip.\n\nThe filter icon is always displayed if your panel has more than one query or source of data (that is, panel or annotation data) but it may not work if previous transformations for merging the queries\u2019 outputs are applied. This is because one transformation takes the output of the previous one.\n\n## Delete a transformation\n\nWe recommend that you remove transformations that you don't need. When you delete a transformation, you remove the data from the visualization.\n\n**Before you begin:**\n\n- Identify all dashboards that rely on the transformation and inform impacted dashboard users.\n\n**To delete a transformation**:\n\n1. Open a panel for editing.\n1. Click the **Transform** tab.\n1. Click the trash icon next to the transformation you want to delete.\n\n{{< figure src=\"/static/img/docs/transformations/screenshot-example-remove-transformation.png\" class=\"docs-image--no-shadow\" max-width= \"1100px\" alt=\"A transformation row with the remove transformation icon highlighted\" >}}\n";
exports.completeTemplate = "".concat(exports.templateMetaContent, "\n\n").concat(templateIntroContent, "\n## Transformation functions\n\nYou can perform the following transformations on your data.\n").concat(buildTransformationDocsContent(content_1.transformationDocsContent), "\n{{% docs/reference %}}\n[Table panel]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/table\"\n[Table panel]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/table\"\n\n[Calculation types]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/query-transform-data/calculation-types\"\n[Calculation types]: \"/docs/grafana-cloud/ -> /docs/grafana-cloud/visualizations/panels-visualizations/query-transform-data/calculation-types\"\n\n[sparkline cell type]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/table#sparkline\"\n[sparkline cell type]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/table#sparkline\"\n\n[Heatmap panel]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/heatmap\"\n[Heatmap panel]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/heatmap\"\n\n[configuration file]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/setup-grafana/configure-grafana#configuration-file-location\"\n[configuration file]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/setup-grafana/configure-grafana#configuration-file-location\"\n\n[Time series panel]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/time-series\"\n[Time series panel]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/panels-visualizations/visualizations/time-series\"\n\n[feature toggle]: \"/docs/grafana/ -> /docs/grafana/<GRAFANA VERSION>/setup-grafana/configure-grafana#feature_toggles\"\n[feature toggle]: \"/docs/grafana-cloud/ -> /docs/grafana/<GRAFANA VERSION>/setup-grafana/configure-grafana#feature_toggles\"\n\n[dashboard variable]: \"/docs/grafana/ -> docs/grafana/<GRAFANA VERSION>/dashboards/variables\"\n[dashboard variable]: \"/docs/grafana-cloud/ -> docs/grafana/<GRAFANA VERSION>/dashboards/variables\"\n\n{{% /docs/reference %}}\n\n[Data frames]: https://grafana.com/developers/plugin-tools/introduction/data-frames/\n");
function buildTransformationDocsContent(transformationDocsContent) {
    var transformationsList = Object.keys(transformationDocsContent);
    var content = transformationsList
        .map(function (transformationName) {
        return "\n### ".concat(transformationDocsContent[transformationName].name, "\n").concat(transformationDocsContent[transformationName].getHelperDocs(content_1.ImageRenderType.ShortcodeFigure));
    })
        // Remove the superfluous commas.
        .join('');
    return content;
}
function buildMarkdownContent() {
    // Build the path to the Markdown file.
    var indexPath = (0, path_1.resolve)(__dirname, '../../' + WRITE_PATH);
    // Write content to the Markdown file.
    (0, fs_1.writeFileSync)(indexPath, exports.completeTemplate, 'utf-8');
}
exports.buildMarkdownContent = buildMarkdownContent;
function getMarkdownContent() {
    var rootDir = (0, path_1.resolve)(__dirname, '../../');
    var pathToMarkdown = (0, path_1.resolve)(rootDir, WRITE_PATH);
    return (0, fs_1.readFileSync)(pathToMarkdown, 'utf-8');
}
exports.getMarkdownContent = getMarkdownContent;
function getJavaScriptContent() {
    return exports.completeTemplate;
}
exports.getJavaScriptContent = getJavaScriptContent;
